<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>C Anatomy of simple feature objects | Intro to GIS and Spatial Analysis</title>
  <meta name="description" content="This is a compilation of lecture notes that accompany my Intro to GIS and Spatial Analysis course." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="C Anatomy of simple feature objects | Intro to GIS and Spatial Analysis" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a compilation of lecture notes that accompany my Intro to GIS and Spatial Analysis course." />
  <meta name="github-repo" content="mgimond/spatial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="C Anatomy of simple feature objects | Intro to GIS and Spatial Analysis" />
  
  <meta name="twitter:description" content="This is a compilation of lecture notes that accompany my Intro to GIS and Spatial Analysis course." />
  

<meta name="author" content="Manuel Gimond" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="mapping-data-in-r.html"/>
<link rel="next" href="vector-operations-in-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.1/leaflet.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-71085TV4MB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-71085TV4MB');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introGIS.html"><a href="introGIS.html"><i class="fa fa-check"></i><b>1</b> Introduction to GIS</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introGIS.html"><a href="introGIS.html#what-is-a-gis"><i class="fa fa-check"></i><b>1.1</b> What is a GIS?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introGIS.html"><a href="introGIS.html#gis-software"><i class="fa fa-check"></i><b>1.1.1</b> GIS software</a></li>
<li class="chapter" data-level="1.1.2" data-path="introGIS.html"><a href="introGIS.html#qgis"><i class="fa fa-check"></i><b>1.1.2</b> QGIS</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introGIS.html"><a href="introGIS.html#what-is-spatial-analysis"><i class="fa fa-check"></i><b>1.2</b> What is Spatial Analysis?</a></li>
<li class="chapter" data-level="1.3" data-path="introGIS.html"><a href="introGIS.html#whats-in-an-acronym"><i class="fa fa-check"></i><b>1.3</b> What’s in an Acronym?</a></li>
</ul></li>
<li class="part"><span><b>PART 1: Working with spatial data</b></span></li>
<li class="chapter" data-level="2" data-path="chp02_0.html"><a href="chp02_0.html"><i class="fa fa-check"></i><b>2</b> Feature Representation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chp02_0.html"><a href="chp02_0.html#vector-vs.-raster"><i class="fa fa-check"></i><b>2.1</b> Vector vs. Raster</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="chp02_0.html"><a href="chp02_0.html#vector"><i class="fa fa-check"></i><b>2.1.1</b> Vector</a></li>
<li class="chapter" data-level="2.1.2" data-path="chp02_0.html"><a href="chp02_0.html#raster"><i class="fa fa-check"></i><b>2.1.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chp02_0.html"><a href="chp02_0.html#object-vs.-field"><i class="fa fa-check"></i><b>2.2</b> Object vs. Field</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chp02_0.html"><a href="chp02_0.html#object-view"><i class="fa fa-check"></i><b>2.2.1</b> Object View</a></li>
<li class="chapter" data-level="2.2.2" data-path="chp02_0.html"><a href="chp02_0.html#field-view"><i class="fa fa-check"></i><b>2.2.2</b> Field View</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chp02_0.html"><a href="chp02_0.html#scale"><i class="fa fa-check"></i><b>2.3</b> Scale</a></li>
<li class="chapter" data-level="2.4" data-path="chp02_0.html"><a href="chp02_0.html#attribute-tables"><i class="fa fa-check"></i><b>2.4</b> Attribute Tables</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="chp02_0.html"><a href="chp02_0.html#measurement-levels"><i class="fa fa-check"></i><b>2.4.1</b> Measurement Levels</a></li>
<li class="chapter" data-level="2.4.2" data-path="chp02_0.html"><a href="chp02_0.html#data-type"><i class="fa fa-check"></i><b>2.4.2</b> Data type</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="gis-data-management.html"><a href="gis-data-management.html"><i class="fa fa-check"></i><b>3</b> GIS Data Management</a>
<ul>
<li class="chapter" data-level="3.1" data-path="gis-data-management.html"><a href="gis-data-management.html#gis-file-data-formats"><i class="fa fa-check"></i><b>3.1</b> GIS File Data Formats</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="gis-data-management.html"><a href="gis-data-management.html#vector-data-file-formats"><i class="fa fa-check"></i><b>3.1.1</b> Vector Data File Formats</a></li>
<li class="chapter" data-level="3.1.2" data-path="gis-data-management.html"><a href="gis-data-management.html#raster-data-file-formats"><i class="fa fa-check"></i><b>3.1.2</b> Raster Data File Formats</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="gis-data-management.html"><a href="gis-data-management.html#managing-gis-files-in-arcgis"><i class="fa fa-check"></i><b>3.2</b> Managing GIS Files in ArcGIS</a></li>
<li class="chapter" data-level="3.3" data-path="gis-data-management.html"><a href="gis-data-management.html#managing-a-map-project-in-arcgis"><i class="fa fa-check"></i><b>3.3</b> Managing a Map Project in ArcGIS</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="symbolizing-features.html"><a href="symbolizing-features.html"><i class="fa fa-check"></i><b>4</b> Symbolizing features</a>
<ul>
<li class="chapter" data-level="4.1" data-path="symbolizing-features.html"><a href="symbolizing-features.html#color"><i class="fa fa-check"></i><b>4.1</b> Color</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="symbolizing-features.html"><a href="symbolizing-features.html#hue"><i class="fa fa-check"></i><b>4.1.1</b> Hue</a></li>
<li class="chapter" data-level="4.1.2" data-path="symbolizing-features.html"><a href="symbolizing-features.html#lightness"><i class="fa fa-check"></i><b>4.1.2</b> Lightness</a></li>
<li class="chapter" data-level="4.1.3" data-path="symbolizing-features.html"><a href="symbolizing-features.html#saturation"><i class="fa fa-check"></i><b>4.1.3</b> Saturation</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="symbolizing-features.html"><a href="symbolizing-features.html#color-space"><i class="fa fa-check"></i><b>4.2</b> Color Space</a></li>
<li class="chapter" data-level="4.3" data-path="symbolizing-features.html"><a href="symbolizing-features.html#classification"><i class="fa fa-check"></i><b>4.3</b> Classification</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="symbolizing-features.html"><a href="symbolizing-features.html#qualitative-color-scheme"><i class="fa fa-check"></i><b>4.3.1</b> Qualitative color scheme</a></li>
<li class="chapter" data-level="4.3.2" data-path="symbolizing-features.html"><a href="symbolizing-features.html#sequential-color-scheme"><i class="fa fa-check"></i><b>4.3.2</b> Sequential color scheme</a></li>
<li class="chapter" data-level="4.3.3" data-path="symbolizing-features.html"><a href="symbolizing-features.html#divergent-color-scheme"><i class="fa fa-check"></i><b>4.3.3</b> Divergent color scheme</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="symbolizing-features.html"><a href="symbolizing-features.html#so-how-do-i-find-a-proper-color-scheme-for-my-data"><i class="fa fa-check"></i><b>4.4</b> So how do I find a proper color scheme for my data?</a></li>
<li class="chapter" data-level="4.5" data-path="symbolizing-features.html"><a href="symbolizing-features.html#classification-intervals"><i class="fa fa-check"></i><b>4.5</b> Classification Intervals</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="symbolizing-features.html"><a href="symbolizing-features.html#an-interactive-example"><i class="fa fa-check"></i><b>4.5.1</b> An Interactive Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistical-maps.html"><a href="statistical-maps.html"><i class="fa fa-check"></i><b>5</b> Statistical maps</a>
<ul>
<li class="chapter" data-level="5.1" data-path="statistical-maps.html"><a href="statistical-maps.html#statistical-distribution-maps"><i class="fa fa-check"></i><b>5.1</b> Statistical distribution maps</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="statistical-maps.html"><a href="statistical-maps.html#quantile-map"><i class="fa fa-check"></i><b>5.1.1</b> Quantile map</a></li>
<li class="chapter" data-level="5.1.2" data-path="statistical-maps.html"><a href="statistical-maps.html#boxplot-map"><i class="fa fa-check"></i><b>5.1.2</b> Boxplot map</a></li>
<li class="chapter" data-level="5.1.3" data-path="statistical-maps.html"><a href="statistical-maps.html#iqr-map"><i class="fa fa-check"></i><b>5.1.3</b> IQR map</a></li>
<li class="chapter" data-level="5.1.4" data-path="statistical-maps.html"><a href="statistical-maps.html#standard-deviation-map"><i class="fa fa-check"></i><b>5.1.4</b> Standard deviation map</a></li>
<li class="chapter" data-level="5.1.5" data-path="statistical-maps.html"><a href="statistical-maps.html#outlier-maps"><i class="fa fa-check"></i><b>5.1.5</b> Outlier maps</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="statistical-maps.html"><a href="statistical-maps.html#mapping-uncertainty"><i class="fa fa-check"></i><b>5.2</b> Mapping uncertainty</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="statistical-maps.html"><a href="statistical-maps.html#problems-in-mapping-uncertainty"><i class="fa fa-check"></i><b>5.2.1</b> Problems in mapping uncertainty</a></li>
<li class="chapter" data-level="5.2.2" data-path="statistical-maps.html"><a href="statistical-maps.html#class-comparison-maps"><i class="fa fa-check"></i><b>5.2.2</b> Class comparison maps</a></li>
<li class="chapter" data-level="5.2.3" data-path="statistical-maps.html"><a href="statistical-maps.html#problem-when-performing-bivariate-analysis"><i class="fa fa-check"></i><b>5.2.3</b> Problem when performing bivariate analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html"><i class="fa fa-check"></i><b>6</b> Pitfalls to avoid</a>
<ul>
<li class="chapter" data-level="6.1" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#representing-count"><i class="fa fa-check"></i><b>6.1</b> Representing Count</a></li>
<li class="chapter" data-level="6.2" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#maup"><i class="fa fa-check"></i><b>6.2</b> MAUP</a></li>
<li class="chapter" data-level="6.3" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#ecological-fallacy"><i class="fa fa-check"></i><b>6.3</b> Ecological Fallacy</a></li>
<li class="chapter" data-level="6.4" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#mapping-rates"><i class="fa fa-check"></i><b>6.4</b> Mapping rates</a></li>
<li class="chapter" data-level="6.5" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#coping-with-unstable-rates"><i class="fa fa-check"></i><b>6.5</b> Coping with Unstable Rates</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="good-map-making-tips.html"><a href="good-map-making-tips.html"><i class="fa fa-check"></i><b>7</b> Good Map Making Tips</a>
<ul>
<li class="chapter" data-level="7.1" data-path="good-map-making-tips.html"><a href="good-map-making-tips.html#elements-of-a-map"><i class="fa fa-check"></i><b>7.1</b> Elements of a map</a></li>
<li class="chapter" data-level="7.2" data-path="good-map-making-tips.html"><a href="good-map-making-tips.html#how-to-create-a-good-map"><i class="fa fa-check"></i><b>7.2</b> How to create a <em>good</em> map</a></li>
<li class="chapter" data-level="7.3" data-path="good-map-making-tips.html"><a href="good-map-making-tips.html#typefaces-and-fonts"><i class="fa fa-check"></i><b>7.3</b> Typefaces and Fonts</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html"><i class="fa fa-check"></i><b>8</b> Spatial Operations and Vector Overlays</a>
<ul>
<li class="chapter" data-level="8.1" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#selection-by-attribute"><i class="fa fa-check"></i><b>8.1</b> Selection by Attribute</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#set-algebra"><i class="fa fa-check"></i><b>8.1.1</b> Set Algebra</a></li>
<li class="chapter" data-level="8.1.2" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#boolean-algebra"><i class="fa fa-check"></i><b>8.1.2</b> Boolean Algebra</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#selection-by-location"><i class="fa fa-check"></i><b>8.2</b> Selection by location</a></li>
<li class="chapter" data-level="8.3" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#vector-overlay"><i class="fa fa-check"></i><b>8.3</b> Vector Overlay</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#clip"><i class="fa fa-check"></i><b>8.3.1</b> Clip</a></li>
<li class="chapter" data-level="8.3.2" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#intersect"><i class="fa fa-check"></i><b>8.3.2</b> Intersect</a></li>
<li class="chapter" data-level="8.3.3" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#union"><i class="fa fa-check"></i><b>8.3.3</b> Union</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chp09_0.html"><a href="chp09_0.html"><i class="fa fa-check"></i><b>9</b> Coordinate Systems</a>
<ul>
<li class="chapter" data-level="9.1" data-path="chp09_0.html"><a href="chp09_0.html#geographic-coordinate-systems"><i class="fa fa-check"></i><b>9.1</b> Geographic Coordinate Systems</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="chp09_0.html"><a href="chp09_0.html#sphere-and-ellipsoid"><i class="fa fa-check"></i><b>9.1.1</b> Sphere and Ellipsoid</a></li>
<li class="chapter" data-level="9.1.2" data-path="chp09_0.html"><a href="chp09_0.html#geoid"><i class="fa fa-check"></i><b>9.1.2</b> Geoid</a></li>
<li class="chapter" data-level="9.1.3" data-path="chp09_0.html"><a href="chp09_0.html#datum"><i class="fa fa-check"></i><b>9.1.3</b> Datum</a></li>
<li class="chapter" data-level="9.1.4" data-path="chp09_0.html"><a href="chp09_0.html#building-the-geographic-coordinate-system"><i class="fa fa-check"></i><b>9.1.4</b> Building the Geographic Coordinate System</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="chp09_0.html"><a href="chp09_0.html#projected-coordinate-systems"><i class="fa fa-check"></i><b>9.2</b> Projected Coordinate Systems</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="chp09_0.html"><a href="chp09_0.html#planar-projections"><i class="fa fa-check"></i><b>9.2.1</b> Planar Projections</a></li>
<li class="chapter" data-level="9.2.2" data-path="chp09_0.html"><a href="chp09_0.html#cylindrical-projection"><i class="fa fa-check"></i><b>9.2.2</b> Cylindrical Projection</a></li>
<li class="chapter" data-level="9.2.3" data-path="chp09_0.html"><a href="chp09_0.html#conical-projection"><i class="fa fa-check"></i><b>9.2.3</b> Conical Projection</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="chp09_0.html"><a href="chp09_0.html#spatial-properties"><i class="fa fa-check"></i><b>9.3</b> Spatial Properties</a></li>
<li class="chapter" data-level="9.4" data-path="chp09_0.html"><a href="chp09_0.html#geodesic-geometries"><i class="fa fa-check"></i><b>9.4</b> Geodesic geometries</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chp10_0.html"><a href="chp10_0.html"><i class="fa fa-check"></i><b>10</b> Map Algebra</a>
<ul>
<li class="chapter" data-level="10.1" data-path="chp10_0.html"><a href="chp10_0.html#local-operations-and-functions"><i class="fa fa-check"></i><b>10.1</b> Local operations and functions</a></li>
<li class="chapter" data-level="10.2" data-path="chp10_0.html"><a href="chp10_0.html#focal-operations-and-functions"><i class="fa fa-check"></i><b>10.2</b> Focal operations and functions</a></li>
<li class="chapter" data-level="10.3" data-path="chp10_0.html"><a href="chp10_0.html#zonal-operations-and-functions"><i class="fa fa-check"></i><b>10.3</b> Zonal operations and functions</a></li>
<li class="chapter" data-level="10.4" data-path="chp10_0.html"><a href="chp10_0.html#global-operations-and-functions"><i class="fa fa-check"></i><b>10.4</b> Global operations and functions</a></li>
<li class="chapter" data-level="10.5" data-path="chp10_0.html"><a href="chp10_0.html#operators-and-functions"><i class="fa fa-check"></i><b>10.5</b> Operators and functions</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="chp10_0.html"><a href="chp10_0.html#mathematical-operators-and-functions"><i class="fa fa-check"></i><b>10.5.1</b> Mathematical operators and functions</a></li>
<li class="chapter" data-level="10.5.2" data-path="chp10_0.html"><a href="chp10_0.html#logical-comparison"><i class="fa fa-check"></i><b>10.5.2</b> Logical comparison</a></li>
<li class="chapter" data-level="10.5.3" data-path="chp10_0.html"><a href="chp10_0.html#boolean-or-logical-operators"><i class="fa fa-check"></i><b>10.5.3</b> Boolean (or Logical) operators</a></li>
<li class="chapter" data-level="10.5.4" data-path="chp10_0.html"><a href="chp10_0.html#combining-operations"><i class="fa fa-check"></i><b>10.5.4</b> Combining operations</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>PART 2: Spatial Analysis</b></span></li>
<li class="chapter" data-level="11" data-path="chp11_0.html"><a href="chp11_0.html"><i class="fa fa-check"></i><b>11</b> Point Pattern Analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="chp11_0.html"><a href="chp11_0.html#centrography"><i class="fa fa-check"></i><b>11.1</b> Centrography</a></li>
<li class="chapter" data-level="11.2" data-path="chp11_0.html"><a href="chp11_0.html#density-based-analysis"><i class="fa fa-check"></i><b>11.2</b> Density based analysis</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="chp11_0.html"><a href="chp11_0.html#global-density"><i class="fa fa-check"></i><b>11.2.1</b> Global density</a></li>
<li class="chapter" data-level="11.2.2" data-path="chp11_0.html"><a href="chp11_0.html#local-density"><i class="fa fa-check"></i><b>11.2.2</b> Local density</a></li>
<li class="chapter" data-level="11.2.3" data-path="chp11_0.html"><a href="chp11_0.html#modeling-intensity-as-a-function-of-a-covariate"><i class="fa fa-check"></i><b>11.2.3</b> Modeling intensity as a function of a covariate</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="chp11_0.html"><a href="chp11_0.html#distance-based-analysis"><i class="fa fa-check"></i><b>11.3</b> Distance based analysis</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="chp11_0.html"><a href="chp11_0.html#average-nearest-neighbor"><i class="fa fa-check"></i><b>11.3.1</b> Average Nearest Neighbor</a></li>
<li class="chapter" data-level="11.3.2" data-path="chp11_0.html"><a href="chp11_0.html#k-and-l-functions"><i class="fa fa-check"></i><b>11.3.2</b> K and L functions</a></li>
<li class="chapter" data-level="11.3.3" data-path="chp11_0.html"><a href="chp11_0.html#the-pair-correlation-function-g"><i class="fa fa-check"></i><b>11.3.3</b> The Pair Correlation Function <span class="math inline">\(g\)</span></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="chp11_0.html"><a href="chp11_0.html#first-and-second-order-effects"><i class="fa fa-check"></i><b>11.4</b> First and second order effects</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>12</b> Hypothesis testing</a>
<ul>
<li class="chapter" data-level="12.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#irpcsr"><i class="fa fa-check"></i><b>12.1</b> IRP/CSR</a></li>
<li class="chapter" data-level="12.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#testing-for-csr-with-the-ann-tool"><i class="fa fa-check"></i><b>12.2</b> Testing for CSR with the ANN tool</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#arcgis-average-nearest-neighbor-tool"><i class="fa fa-check"></i><b>12.2.1</b> ArcGIS’ Average Nearest Neighbor Tool</a></li>
<li class="chapter" data-level="12.2.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#a-better-approach-a-monte-carlo-test"><i class="fa fa-check"></i><b>12.2.2</b> A better approach: a Monte Carlo test</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#alternatives-to-csrirp"><i class="fa fa-check"></i><b>12.3</b> Alternatives to CSR/IRP</a></li>
<li class="chapter" data-level="12.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#monte-carlo-test-with-k-and-l-functions"><i class="fa fa-check"></i><b>12.4</b> Monte Carlo test with K and L functions</a></li>
<li class="chapter" data-level="12.5" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#PPM"><i class="fa fa-check"></i><b>12.5</b> Testing for a covariate effect</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html"><i class="fa fa-check"></i><b>13</b> Spatial Autocorrelation</a>
<ul>
<li class="chapter" data-level="13.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#global-morans-i"><i class="fa fa-check"></i><b>13.1</b> Global Moran’s <em>I</em></a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#computing-the-morans-i"><i class="fa fa-check"></i><b>13.1.1</b> Computing the Moran’s <em>I</em></a></li>
<li class="chapter" data-level="13.1.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#monte-carlo-approach-to-estimating-significance"><i class="fa fa-check"></i><b>13.1.2</b> Monte Carlo approach to estimating significance</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#morans-i-at-different-lags"><i class="fa fa-check"></i><b>13.2</b> Moran’s <em>I</em> at different lags</a></li>
<li class="chapter" data-level="13.3" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#local-morans-i"><i class="fa fa-check"></i><b>13.3</b> Local Moran’s <em>I</em></a></li>
<li class="chapter" data-level="13.4" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#morans-i-equation-explained"><i class="fa fa-check"></i><b>13.4</b> Moran’s <em>I</em> equation explained</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#local-morans-i-1"><i class="fa fa-check"></i><b>13.4.1</b> Local Moran’s I</a></li>
<li class="chapter" data-level="13.4.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#global-morans-i-1"><i class="fa fa-check"></i><b>13.4.2</b> Global Moran’s I</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html"><i class="fa fa-check"></i><b>14</b> Spatial Interpolation</a>
<ul>
<li class="chapter" data-level="14.1" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#deterministic-approach-to-interpolation"><i class="fa fa-check"></i><b>14.1</b> Deterministic Approach to Interpolation</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#proximity-interpolation"><i class="fa fa-check"></i><b>14.1.1</b> Proximity interpolation</a></li>
<li class="chapter" data-level="14.1.2" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#inverse-distance-weighted-idw"><i class="fa fa-check"></i><b>14.1.2</b> Inverse Distance Weighted (IDW)</a></li>
<li class="chapter" data-level="14.1.3" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#fine-tuning-the-interpolation-parameters"><i class="fa fa-check"></i><b>14.1.3</b> Fine tuning the interpolation parameters</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#statistical-approach-to-interpolation"><i class="fa fa-check"></i><b>14.2</b> Statistical Approach to Interpolation</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#trend-surfaces"><i class="fa fa-check"></i><b>14.2.1</b> Trend Surfaces</a></li>
<li class="chapter" data-level="14.2.2" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#ordinary-kriging"><i class="fa fa-check"></i><b>14.2.2</b> Ordinary Kriging</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>15</b> References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html"><i class="fa fa-check"></i><b>A</b> Reading and writing spatial data in R</a>
<ul>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_2"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_3"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4"><i class="fa fa-check"></i>Creating spatial objects</a>
<ul>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_1"><i class="fa fa-check"></i>Reading a shapefile</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_2"><i class="fa fa-check"></i>Reading a GeoPackage</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_3"><i class="fa fa-check"></i>Reading a raster</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_5"><i class="fa fa-check"></i>Creating a spatial object from a data frame</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_6"><i class="fa fa-check"></i>Geocoding street addresses</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_5"><i class="fa fa-check"></i>Converting from an <code>sf</code> object</a>
<ul>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_5_1"><i class="fa fa-check"></i>Converting an <code>sf</code> object to a <code>Spatial*</code> object (<code>spdep</code>/<code>sp</code>)</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_5_2"><i class="fa fa-check"></i>Converting an <code>sf</code> polygon object to an <code>owin</code> object</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_5_3"><i class="fa fa-check"></i>Converting an <code>sf</code> point object to a <code>ppp</code> object</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_5_4"><i class="fa fa-check"></i>Converting a <code>SpatRaster</code> object to an <code>im</code> object</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_6"><i class="fa fa-check"></i>Converting to an <code>sf</code> object</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_7"><i class="fa fa-check"></i>Dissecting the <code>sf</code> file object</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_8"><i class="fa fa-check"></i>Exporting to different data file formats</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html"><i class="fa fa-check"></i><b>B</b> Mapping data in R</a>
<ul>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#sample-files-for-this-exercise"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tmap"><i class="fa fa-check"></i><code>tmap</code></a>
<ul>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#the-basics"><i class="fa fa-check"></i>The basics</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#combining-layers"><i class="fa fa-check"></i>Combining layers</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tweaking-classification-schemes"><i class="fa fa-check"></i>Tweaking classification schemes</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tweaking-colors"><i class="fa fa-check"></i>Tweaking colors</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#adding-labels"><i class="fa fa-check"></i>Adding labels</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#adding-a-grid-or-graticule"><i class="fa fa-check"></i>Adding a grid or graticule</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#adding-statistical-plots"><i class="fa fa-check"></i>Adding statistical plots</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#mapping-raster-files"><i class="fa fa-check"></i>Mapping raster files</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#changing-coordinate-systems"><i class="fa fa-check"></i>Changing coordinate systems</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#side-by-side-maps"><i class="fa fa-check"></i>Side-by-side maps</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#splitting-data-by-polygons-or-group-of-polygons"><i class="fa fa-check"></i>Splitting data by polygons or group of polygons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#ggplot2"><i class="fa fa-check"></i><code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#the-basics-1"><i class="fa fa-check"></i>The basics</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tweaking-classification-schemes-1"><i class="fa fa-check"></i>Tweaking classification schemes</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#combining-layers-1"><i class="fa fa-check"></i>Combining layers</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#plot_sf"><i class="fa fa-check"></i><code>plot_sf</code></a>
<ul>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#the-basics-2"><i class="fa fa-check"></i>The basics</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#adding-a-graticule"><i class="fa fa-check"></i>Adding a graticule</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#combining-layers-2"><i class="fa fa-check"></i>Combining layers</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tweaking-colors-1"><i class="fa fa-check"></i>Tweaking colors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html"><i class="fa fa-check"></i><b>C</b> Anatomy of simple feature objects</a>
<ul>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#creating-point-sf-objects"><i class="fa fa-check"></i>Creating point ‘sf’ objects</a>
<ul>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#step-1-create-the-point-geometry-sfg"><i class="fa fa-check"></i>Step 1: Create the point geometry: <code>sfg</code></a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#step-2-create-a-column-of-simple-feature-geometries-sfc"><i class="fa fa-check"></i>Step 2: Create a column of simple feature geometries: <code>sfc</code></a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#step-3-create-the-simple-feature-object-sf"><i class="fa fa-check"></i>Step 3: Create the simple feature object <code>sf</code></a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#renaming-the-geometry-column"><i class="fa fa-check"></i>Renaming the geometry column</a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#adding-attributes-to-an-sf-object"><i class="fa fa-check"></i>Adding attributes to an <code>sf</code> object</a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#adding-a-geometry-column-to-an-existing-non-spatial-dataframe"><i class="fa fa-check"></i>Adding a geometry column to an existing non-spatial dataframe</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#creating-polyline-sf-objects"><i class="fa fa-check"></i>Creating polyline ‘sf’ objects</a>
<ul>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#creating-branching-polyline-features"><i class="fa fa-check"></i>Creating branching polyline features</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#creating-polygon-sf-objects"><i class="fa fa-check"></i>Creating polygon ‘sf’ objects</a>
<ul>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#polygon-simple-feature"><i class="fa fa-check"></i><code>POLYGON</code> simple feature</a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#multipolygon-simple-feature-multipart-features"><i class="fa fa-check"></i><code>MULTIPOLYGON</code> simple feature: multipart features</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#extracting-geometry-from-an-sf-object"><i class="fa fa-check"></i>Extracting geometry from an <code>sf</code> object</a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#alternative-syntax"><i class="fa fa-check"></i>Alternative syntax</a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#additional-resources"><i class="fa fa-check"></i>Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html"><i class="fa fa-check"></i><b>D</b> Vector operations in R</a>
<ul>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#dissolving-geometries"><i class="fa fa-check"></i>Dissolving geometries</a>
<ul>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#dissolving-by-contiguous-shape"><i class="fa fa-check"></i>Dissolving by contiguous shape</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#dissolving-by-attribute"><i class="fa fa-check"></i>Dissolving by attribute</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#subsetting-by-attribute"><i class="fa fa-check"></i>Subsetting by attribute</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#intersecting-layers"><i class="fa fa-check"></i>Intersecting layers</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#clipping-spatial-objects-using-other-spatial-objects"><i class="fa fa-check"></i>Clipping spatial objects using other spatial objects</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#unioning-layers"><i class="fa fa-check"></i>Unioning layers</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#buffering-geometries"><i class="fa fa-check"></i>Buffering geometries</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html"><i class="fa fa-check"></i><b>E</b> Mapping rates in R</a>
<ul>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#raw-rates"><i class="fa fa-check"></i>Raw Rates</a></li>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#standardized-mortality-ratios-relative-risk"><i class="fa fa-check"></i>Standardized mortality ratios (relative risk)</a></li>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#dykes-and-unwins-chi-square-statistic"><i class="fa fa-check"></i>Dykes and Unwin’s chi-square statistic</a></li>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#unstable-ratios"><i class="fa fa-check"></i>Unstable ratios</a>
<ul>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#global-empirical-bayes-eb-rate-estimate"><i class="fa fa-check"></i>Global Empirical Bayes (EB) rate estimate</a></li>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#local-empirical-bayes-eb-rate-estimate"><i class="fa fa-check"></i>Local Empirical Bayes (EB) rate estimate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="F" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html"><i class="fa fa-check"></i><b>F</b> Raster operations in R</a>
<ul>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#sample-files-for-this-exercise-1"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#local-operations-and-functions-1"><i class="fa fa-check"></i>Local operations and functions</a>
<ul>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#unary-operations-and-functions-applied-to-single-rasters"><i class="fa fa-check"></i>Unary operations and functions (applied to single rasters)</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#binary-operations-and-functions-where-two-rasters-are-used"><i class="fa fa-check"></i>Binary operations and functions (where two rasters are used)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#focal-operations-and-functions-1"><i class="fa fa-check"></i>Focal operations and functions</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#zonal-operations-and-functions-1"><i class="fa fa-check"></i>Zonal operations and functions</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#global-operations-and-functions-1"><i class="fa fa-check"></i>Global operations and functions</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#computing-cumulative-distances"><i class="fa fa-check"></i>Computing cumulative distances</a>
<ul>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#working-example"><i class="fa fa-check"></i>Working example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="G" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html"><i class="fa fa-check"></i><b>G</b> Coordinate Systems in R</a>
<ul>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#a-note-about-the-changes-to-the-proj-environment"><i class="fa fa-check"></i>A note about the changes to the <code>PROJ</code> environment</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#sample-files-for-this-exercise-2"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#loading-the-sf-package"><i class="fa fa-check"></i>Loading the <code>sf</code> package</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#checking-for-a-coordinate-system"><i class="fa fa-check"></i>Checking for a coordinate system</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#understanding-the-proj4-coordinate-syntax"><i class="fa fa-check"></i>Understanding the Proj4 coordinate syntax</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#assigning-a-coordinate-system"><i class="fa fa-check"></i>Assigning a coordinate system</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#transforming-coordinate-systems"><i class="fa fa-check"></i>Transforming coordinate systems</a>
<ul>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#reprojecting-to-a-new-meridian-center"><i class="fa fa-check"></i>Reprojecting to a new meridian center</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#a-note-about-containment"><i class="fa fa-check"></i>A note about containment</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#creating-tissot-indicatrix-circles"><i class="fa fa-check"></i>Creating Tissot indicatrix circles</a></li>
</ul></li>
<li class="chapter" data-level="H" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html"><i class="fa fa-check"></i><b>H</b> Point pattern analysis in R</a>
<ul>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#sample-files-for-this-exercise-3"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#prepping-the-data"><i class="fa fa-check"></i>Prepping the data</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#density-based-analysis-1"><i class="fa fa-check"></i>Density based analysis</a>
<ul>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#quadrat-density-1"><i class="fa fa-check"></i>Quadrat density</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#quadrat-density-on-a-tessellated-surface"><i class="fa fa-check"></i>Quadrat density on a tessellated surface</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#kernel-density-raster"><i class="fa fa-check"></i>Kernel density raster</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#kernel-density-adjusted-for-covariate-1"><i class="fa fa-check"></i>Kernel density adjusted for covariate</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#modeling-intensity-as-a-function-of-a-covariate-1"><i class="fa fa-check"></i>Modeling intensity as a function of a covariate</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#distance-based-analysis-1"><i class="fa fa-check"></i>Distance based analysis</a>
<ul>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#average-nearest-neighbor-analysis"><i class="fa fa-check"></i>Average nearest neighbor analysis</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#k-and-l-functions-1"><i class="fa fa-check"></i>K and L functions</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#pair-correlation-function-g"><i class="fa fa-check"></i>Pair correlation function g</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#hypothesis-tests"><i class="fa fa-check"></i>Hypothesis tests</a>
<ul>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#test-for-clusteringdispersion"><i class="fa fa-check"></i>Test for clustering/dispersion</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#computing-a-pseudo-p-value-from-the-simulation"><i class="fa fa-check"></i>Computing a pseudo p-value from the simulation</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#test-for-a-poisson-point-process-model-with-a-covariate-effect"><i class="fa fa-check"></i>Test for a poisson point process model with a covariate effect</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="I" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html"><i class="fa fa-check"></i><b>I</b> Spatial autocorrelation in R</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_1"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_2"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_3"><i class="fa fa-check"></i>Define neighboring polygons</a></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_4"><i class="fa fa-check"></i>Computing the Moran’s I statistic: the hard way</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#computing-a-pseudo-p-value-from-an-mc-simulation"><i class="fa fa-check"></i>Computing a pseudo p-value from an MC simulation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_5"><i class="fa fa-check"></i>Computing the Moran’s I statistic: the easy way</a></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_6"><i class="fa fa-check"></i>Moran’s I as a function of a distance band</a></li>
</ul></li>
<li class="chapter" data-level="J" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html"><i class="fa fa-check"></i><b>J</b> Interpolation in R</a>
<ul>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#thiessen-polygons"><i class="fa fa-check"></i>Thiessen polygons</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#idw"><i class="fa fa-check"></i>IDW</a>
<ul>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#fine-tuning-the-interpolation"><i class="fa fa-check"></i>Fine-tuning the interpolation</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#cross-validation"><i class="fa fa-check"></i>Cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#st-order-polynomial-fit"><i class="fa fa-check"></i>1<sup>st</sup> order polynomial fit</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#nd-order-polynomial"><i class="fa fa-check"></i>2<sup>nd</sup> order polynomial</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#kriging"><i class="fa fa-check"></i>Kriging</a>
<ul>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#fit-the-variogram-model"><i class="fa fa-check"></i>Fit the variogram model</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#generate-kriged-surface"><i class="fa fa-check"></i>Generate Kriged surface</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#generate-the-variance-and-confidence-interval-maps"><i class="fa fa-check"></i>Generate the variance and confidence interval maps</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro to GIS and Spatial Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="anatomy-of-simple-feature-objects" class="section level1 hasAnchor" number="18">
<h1><span class="header-section-number">C</span> Anatomy of simple feature objects<a href="anatomy-of-simple-feature-objects.html#anatomy-of-simple-feature-objects" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<table class="package_ver_table">
<tbody>
<tr>
<td style="text-align:left;color: black !important;background-color: #ffc178 !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
R
</td>
<td style="text-align:left;color: black !important;background-color: #ffc178 !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
sf
</td>
<td style="text-align:left;color: black !important;background-color: #ffc178 !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
ggplot2
</td>
</tr>
<tr>
<td style="text-align:left;color: white !important;background-color: #AAAAAA !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
4.3.2
</td>
<td style="text-align:left;color: white !important;background-color: #AAAAAA !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
1.0.14
</td>
<td style="text-align:left;color: white !important;background-color: #AAAAAA !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
3.4.4
</td>
</tr>
</tbody>
</table>
<p>This tutorial exposes you to the building blocks of simple feature objects via the the creation of point, polyline and polygon features from scratch.</p>
<div id="creating-point-sf-objects" class="section level2 unnumbered hasAnchor">
<h2>Creating point ‘sf’ objects<a href="anatomy-of-simple-feature-objects.html#creating-point-sf-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will start off by exploring the creation of a singlepart point feature object. There are three phases in creating a point simple feature (<code>sf</code>) object:</p>
<ul>
<li>Defining the coordinate pairs via a point geometry object, <code>sfg</code>;</li>
<li>Creating a simple feature column object, <code>sfc</code>, from the point geometries;</li>
<li>Creating the simple feature object, <code>sf</code>.</li>
</ul>
<div id="step-1-create-the-point-geometry-sfg" class="section level3 unnumbered hasAnchor">
<h3>Step 1: Create the point geometry: <code>sfg</code><a href="anatomy-of-simple-feature-objects.html#step-1-create-the-point-geometry-sfg" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here, we’ll create three separate point objects. We’ll adopt a geographic coordinate system, but note that we do not specify the coordinate system just yet.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="anatomy-of-simple-feature-objects.html#cb105-1" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb105-2"><a href="anatomy-of-simple-feature-objects.html#cb105-2" tabindex="-1"></a>p1.sfg <span class="ot">&lt;-</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>, <span class="dv">45</span>)) </span>
<span id="cb105-3"><a href="anatomy-of-simple-feature-objects.html#cb105-3" tabindex="-1"></a>p2.sfg <span class="ot">&lt;-</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">44</span>)) </span>
<span id="cb105-4"><a href="anatomy-of-simple-feature-objects.html#cb105-4" tabindex="-1"></a>p3.sfg <span class="ot">&lt;-</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">45</span>)) </span></code></pre></div>
<p>Let’s check the class of one of these point geometries.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="anatomy-of-simple-feature-objects.html#cb106-1" tabindex="-1"></a><span class="fu">class</span>(p1.sfg)</span></code></pre></div>
<pre><code>[1] &quot;XY&quot;    &quot;POINT&quot; &quot;sfg&quot;  </code></pre>
<p>What we are looking for is a <code>sfg</code> class. You’ll note other classes associated with this object such as <code>POINT</code> which defines the geometric primitive. You’ll see examples of other geometric primitives later in this tutorial.</p>
<p>Note that if a multipart point feature object is desired, the <code>st_multipoint()</code> function needs to be used instead of <code>st_point()</code> with the coordinate pairs defined in matrix as in <code>st_multipoint(matrix( c(-70, 45, -69, 44, -69, 45), ncol = 2, byrow = TRUE  ) )</code>.</p>
</div>
<div id="step-2-create-a-column-of-simple-feature-geometries-sfc" class="section level3 unnumbered hasAnchor">
<h3>Step 2: Create a column of simple feature geometries: <code>sfc</code><a href="anatomy-of-simple-feature-objects.html#step-2-create-a-column-of-simple-feature-geometries-sfc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, we’ll combine the point geometries into a single object.</p>
<p>Note that if you are to define a coordinate system for the features, you can do so here via the <code>crs=</code> parameter. We use the WGS 1984 reference system (EPSG code of <code>4326</code>).</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="anatomy-of-simple-feature-objects.html#cb108-1" tabindex="-1"></a>p.sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>( <span class="fu">list</span>(p1.sfg, p2.sfg, p3.sfg), <span class="at">crs =</span> <span class="dv">4326</span> )</span>
<span id="cb108-2"><a href="anatomy-of-simple-feature-objects.html#cb108-2" tabindex="-1"></a><span class="fu">class</span>(p.sfc)</span></code></pre></div>
<pre><code>[1] &quot;sfc_POINT&quot; &quot;sfc&quot;      </code></pre>
<p>The object is a simple feature column, <code>sfc</code>. More specifically, we’ve combined the point geometries into a single object whereby each geometry is assigned its own row or, to be technical, each point was assigned its own component via the <code>list</code> function. You can can confirm that each point geometry is assigned its own row in the following output.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="anatomy-of-simple-feature-objects.html#cb110-1" tabindex="-1"></a>p.sfc</span></code></pre></div>
<pre><code>Geometry set for 3 features 
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -70 ymin: 44 xmax: -69 ymax: 45
Geodetic CRS:  WGS 84</code></pre>
<p>You can access each point using <code>list</code> operations. For example, to access the second point, type:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="anatomy-of-simple-feature-objects.html#cb112-1" tabindex="-1"></a>p.sfc[[<span class="dv">2</span>]]</span></code></pre></div>
</div>
<div id="step-3-create-the-simple-feature-object-sf" class="section level3 unnumbered hasAnchor">
<h3>Step 3: Create the simple feature object <code>sf</code><a href="anatomy-of-simple-feature-objects.html#step-3-create-the-simple-feature-object-sf" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The final step is to create the simple feature object.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="anatomy-of-simple-feature-objects.html#cb113-1" tabindex="-1"></a>p.sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(p.sfc)</span>
<span id="cb113-2"><a href="anatomy-of-simple-feature-objects.html#cb113-2" tabindex="-1"></a>p.sf</span></code></pre></div>
<pre><code>Simple feature collection with 3 features and 0 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -70 ymin: 44 xmax: -69 ymax: 45
Geodetic CRS:  WGS 84
           p.sfc
1 POINT (-70 45)
2 POINT (-69 44)
3 POINT (-69 45)</code></pre>
</div>
<div id="renaming-the-geometry-column" class="section level3 unnumbered hasAnchor">
<h3>Renaming the geometry column<a href="anatomy-of-simple-feature-objects.html#renaming-the-geometry-column" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The above step generated a geometry column named after the input <code>sfc</code> object name (<code>p.sfc</code> in our example). This is perfectly functional since the <code>sf</code> object knows that this is the geometry column. We can confirm this by checking out <code>p.sf</code>’s attributes.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="anatomy-of-simple-feature-objects.html#cb115-1" tabindex="-1"></a><span class="fu">attributes</span>(p.sf)</span></code></pre></div>
<pre><code>$names
[1] &quot;p.sfc&quot;

$row.names
[1] 1 2 3

$class
[1] &quot;sf&quot;         &quot;data.frame&quot;

$sf_column
[1] &quot;p.sfc&quot;

$agr
factor()
Levels: constant aggregate identity</code></pre>
<p>What we are looking for is the <code>$sf_column</code> attribute which is , in our example, pointing to the <code>p.sfc</code> column. This attribute is critical in a spatial operation that makes use of the dataframe’s spatial objects. Functions that recognize <code>sf</code> objects will look for this attribute to identify the geometry column.</p>
<p>You might chose to rename the column to something more meaningful such as <code>coords</code> (note that some spatially enabled databases adopt the name <code>geom</code>). You can use the <code>names()</code> function to rename that column, but note that you will need to re-define the geometry column in the attributes using the <code>st_geometry()</code> function.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="anatomy-of-simple-feature-objects.html#cb117-1" tabindex="-1"></a><span class="fu">names</span>(p.sf) <span class="ot">&lt;-</span> <span class="st">&quot;coords&quot;</span></span>
<span id="cb117-2"><a href="anatomy-of-simple-feature-objects.html#cb117-2" tabindex="-1"></a><span class="fu">st_geometry</span>(p.sf) <span class="ot">&lt;-</span> <span class="st">&quot;coords&quot;</span></span>
<span id="cb117-3"><a href="anatomy-of-simple-feature-objects.html#cb117-3" tabindex="-1"></a>p.sf</span></code></pre></div>
<pre><code>Simple feature collection with 3 features and 0 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -70 ymin: 44 xmax: -69 ymax: 45
Geodetic CRS:  WGS 84
          coords
1 POINT (-70 45)
2 POINT (-69 44)
3 POINT (-69 45)</code></pre>
</div>
<div id="adding-attributes-to-an-sf-object" class="section level3 unnumbered hasAnchor">
<h3>Adding attributes to an <code>sf</code> object<a href="anatomy-of-simple-feature-objects.html#adding-attributes-to-an-sf-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>p.sf</code> object is nothing more than a dataframe with a geometry column of <code>list</code> data type.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="anatomy-of-simple-feature-objects.html#cb119-1" tabindex="-1"></a><span class="fu">typeof</span>(p.sf<span class="sc">$</span>coords)</span></code></pre></div>
<pre><code>[1] &quot;list&quot;</code></pre>
<p>Storing spatial features in a dataframe has many benefits, one of which is operating on the features’ attribute values. For example, we can add a new column with attribute values for each geometry entry. Here, we’ll assign letters to each point. Note that the order in which the attribute values are passed to the dataframe must match that of the geometry elements.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="anatomy-of-simple-feature-objects.html#cb121-1" tabindex="-1"></a>p.sf<span class="sc">$</span>val1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)</span>
<span id="cb121-2"><a href="anatomy-of-simple-feature-objects.html#cb121-2" tabindex="-1"></a>p.sf</span></code></pre></div>
<pre><code>Simple feature collection with 3 features and 1 field
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -70 ymin: 44 xmax: -69 ymax: 45
Geodetic CRS:  WGS 84
          coords val1
1 POINT (-70 45)    A
2 POINT (-69 44)    B
3 POINT (-69 45)    C</code></pre>
<p>We can use <code>sf</code>’s <code>plot</code> function to view the points.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="anatomy-of-simple-feature-objects.html#cb123-1" tabindex="-1"></a><span class="fu">plot</span>(p.sf, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">axes =</span> <span class="cn">TRUE</span>, <span class="at">main =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-12-1.png" width="273.6" /></p>
</div>
<div id="adding-a-geometry-column-to-an-existing-non-spatial-dataframe" class="section level3 unnumbered hasAnchor">
<h3>Adding a geometry column to an existing non-spatial dataframe<a href="anatomy-of-simple-feature-objects.html#adding-a-geometry-column-to-an-existing-non-spatial-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A nifty property of the <code>sfc</code> object created in step 2 above is the ability to append it to an existing dataframe using the <code>st_geometry()</code> function. In the following example, we’ll create a dataframe, then append the geometry column to that dataframe.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="anatomy-of-simple-feature-objects.html#cb124-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col1 =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>))</span>
<span id="cb124-2"><a href="anatomy-of-simple-feature-objects.html#cb124-2" tabindex="-1"></a><span class="fu">st_geometry</span>(df) <span class="ot">&lt;-</span> p.sfc</span></code></pre></div>
<p>Note that once we’ve added the geometry column, <code>df</code> becomes a spatial feature object and the geometry column is assigned the name <code>geometry</code>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="anatomy-of-simple-feature-objects.html#cb125-1" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>Simple feature collection with 3 features and 1 field
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -70 ymin: 44 xmax: -69 ymax: 45
Geodetic CRS:  WGS 84
  col1       geometry
1    A POINT (-70 45)
2    B POINT (-69 44)
3    C POINT (-69 45)</code></pre>
</div>
</div>
<div id="creating-polyline-sf-objects" class="section level2 unnumbered hasAnchor">
<h2>Creating polyline ‘sf’ objects<a href="anatomy-of-simple-feature-objects.html#creating-polyline-sf-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The steps are similar to creating a point object. You first create the geometry(ies), you then combine the geometry(ies) into a spatial feature column before creating the simple feature object.</p>
<p>First, we need to define the vertices that will define each line segment of the polyline. The order in which the vertices are defined matters: The order defines each connecting line segment ends. The coordinate pairs of each vertex are stored in a matrix.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="anatomy-of-simple-feature-objects.html#cb127-1" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>, <span class="dv">45</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">44</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">45</span>) )</span></code></pre></div>
<p>Next, we create a polyline geometry object.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="anatomy-of-simple-feature-objects.html#cb128-1" tabindex="-1"></a>l.sfg <span class="ot">&lt;-</span> <span class="fu">st_linestring</span>(l)</span></code></pre></div>
<p>Next, we create the simple feature column. We also add the reference system definition (<code>crs = 4326</code>).</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="anatomy-of-simple-feature-objects.html#cb129-1" tabindex="-1"></a>l.sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>(<span class="fu">list</span>(l.sfg), <span class="at">crs =</span> <span class="dv">4326</span>)</span></code></pre></div>
<p>Finally, we create the simple feature object.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="anatomy-of-simple-feature-objects.html#cb130-1" tabindex="-1"></a>l.sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(l.sfc)</span>
<span id="cb130-2"><a href="anatomy-of-simple-feature-objects.html#cb130-2" tabindex="-1"></a>l.sf</span></code></pre></div>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: LINESTRING
Dimension:     XY
Bounding box:  xmin: -70 ymin: 44 xmax: -69 ymax: 45
Geodetic CRS:  WGS 84
                           l.sfc
1 LINESTRING (-70 45, -69 44,...</code></pre>
<p>Even though we have multiple line segments, they are all associated with a single polyline feature, hence they each share the same attribute.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="anatomy-of-simple-feature-objects.html#cb132-1" tabindex="-1"></a> <span class="fu">plot</span>(l.sf, <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">main =</span> <span class="cn">NULL</span>, <span class="at">axes =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-19-1.png" width="192" /></p>
<div id="creating-branching-polyline-features" class="section level3 unnumbered hasAnchor">
<h3>Creating branching polyline features<a href="anatomy-of-simple-feature-objects.html#creating-branching-polyline-features" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can also create polyline features with branching segments (i.e. where at least one vertex is associated with more than two line segments). You simply need to make sure that the coordinate values for the overlapping vertices share the exact same values.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="anatomy-of-simple-feature-objects.html#cb133-1" tabindex="-1"></a><span class="co"># Define coordinate pairs</span></span>
<span id="cb133-2"><a href="anatomy-of-simple-feature-objects.html#cb133-2" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>, <span class="dv">45</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">44</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">45</span>) )</span>
<span id="cb133-3"><a href="anatomy-of-simple-feature-objects.html#cb133-3" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">44</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>, <span class="dv">44</span>) )</span>
<span id="cb133-4"><a href="anatomy-of-simple-feature-objects.html#cb133-4" tabindex="-1"></a>l3 <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">44</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">68</span>, <span class="dv">43</span>) )</span>
<span id="cb133-5"><a href="anatomy-of-simple-feature-objects.html#cb133-5" tabindex="-1"></a></span>
<span id="cb133-6"><a href="anatomy-of-simple-feature-objects.html#cb133-6" tabindex="-1"></a><span class="co"># Create simple feature geometry object</span></span>
<span id="cb133-7"><a href="anatomy-of-simple-feature-objects.html#cb133-7" tabindex="-1"></a>l.sfg <span class="ot">&lt;-</span> <span class="fu">st_multilinestring</span>(<span class="fu">list</span>(l1, l2, l3))</span>
<span id="cb133-8"><a href="anatomy-of-simple-feature-objects.html#cb133-8" tabindex="-1"></a></span>
<span id="cb133-9"><a href="anatomy-of-simple-feature-objects.html#cb133-9" tabindex="-1"></a><span class="co"># Create simple feature column object</span></span>
<span id="cb133-10"><a href="anatomy-of-simple-feature-objects.html#cb133-10" tabindex="-1"></a>l.sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>(<span class="fu">list</span>(l.sfg), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb133-11"><a href="anatomy-of-simple-feature-objects.html#cb133-11" tabindex="-1"></a></span>
<span id="cb133-12"><a href="anatomy-of-simple-feature-objects.html#cb133-12" tabindex="-1"></a><span class="co"># Create simple feature object</span></span>
<span id="cb133-13"><a href="anatomy-of-simple-feature-objects.html#cb133-13" tabindex="-1"></a>l.sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(l.sfc)</span>
<span id="cb133-14"><a href="anatomy-of-simple-feature-objects.html#cb133-14" tabindex="-1"></a></span>
<span id="cb133-15"><a href="anatomy-of-simple-feature-objects.html#cb133-15" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb133-16"><a href="anatomy-of-simple-feature-objects.html#cb133-16" tabindex="-1"></a><span class="fu">plot</span>(l.sf, <span class="at">type =</span> <span class="st">&quot;b&quot;</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">axes =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-20-1.png" width="168" /></p>
</div>
</div>
<div id="creating-polygon-sf-objects" class="section level2 unnumbered hasAnchor">
<h2>Creating polygon ‘sf’ objects<a href="anatomy-of-simple-feature-objects.html#creating-polygon-sf-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>General steps in creating a polygon <code>sf</code> spatial object from scratch include:</p>
<ul>
<li>Defining the vertices of each polygon in a matrix;</li>
<li>Creating a list object from each matrix object (the list structure will differ between <code>POLYGON</code> and <code>MULTIPOLYGON</code> geometries);</li>
<li>Creating an <code>sfg</code> polygon geometry object from the list;</li>
<li>Creating an <code>sf</code> spatial object.</li>
</ul>
<p>Defining a polygon’s geometry is a bit more involved than a polyline in that a polygon defines an enclosed area. By convention, simple features record vertices coordinate pairs in a counterclockwise direction such that the area to the <strong>left</strong> of a polygon’s perimeter when traveling in the direction of the recorded vertices is the polygon’s “inside”. This is counter to the order in which vertices are recorded in a shapefile whereby the area to the <strong>right</strong> of the traveled path along the polygon’s perimeter is deemed “inside”.</p>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-21-1.png" width="576" /></p>
<p>A polygon hole has its ring defined in the opposite direction: clockwise for a simple feature object and counterclockwise for a shapefile.</p>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-22-1.png" width="576" /></p>
<p>For many applications in R, the ring direction will not matter, but for a few they might. So when possible, adopt the simple feature paradigm when defining the coordinate pairs. Note that importing a shapefile into an R session will usually automatically reverse the polygons’ ring direction.</p>
<p>There are two types of polygon geometries that can be adopted depending on your needs: <code>POLYGON</code> and <code>MULTIPOLYGON</code>.</p>
<div id="polygon-simple-feature" class="section level3 unnumbered hasAnchor">
<h3><code>POLYGON</code> simple feature<a href="anatomy-of-simple-feature-objects.html#polygon-simple-feature" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="a-plain-polygon" class="section level4 unnumbered hasAnchor">
<h4>A plain polygon<a href="anatomy-of-simple-feature-objects.html#a-plain-polygon" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We’ll first create a simple polygon shaped like a triangle. The <code>sf</code> output structure will be similar to that for the <code>POINT</code> and <code>POLYLINE</code> objects with the coordinate pairs defining the polygon vertices stored in a geometry column.</p>
<p><img src="img/sf_fig1.png" /></p>
<p>The polygon coordinate values are defined in a matrix. The last coordinate pair must match the first coordinate pair. The coordinate values will be recorded in a geographic coordinate system (latitude, longitude) but the reference system won’t be defined until the creation of the <code>sfc</code> object.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="anatomy-of-simple-feature-objects.html#cb134-1" tabindex="-1"></a>poly1.crd <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">66</span>, <span class="dv">43</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>, <span class="dv">47</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>,<span class="dv">43</span>),  <span class="fu">c</span>(<span class="sc">-</span><span class="dv">66</span>, <span class="dv">43</span>) )</span></code></pre></div>
<p>Next, we create the <code>POLYGON</code> geometries. The polygon matrix needs to be wrapped in a list object.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="anatomy-of-simple-feature-objects.html#cb135-1" tabindex="-1"></a>poly1.geom <span class="ot">&lt;-</span> <span class="fu">st_polygon</span>( <span class="fu">list</span>(poly1.crd ) )</span></code></pre></div>
<p>We now have a polygon geometry.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="anatomy-of-simple-feature-objects.html#cb136-1" tabindex="-1"></a>poly1.geom </span></code></pre></div>
<p>Next, we create a simple feature column from the polygon geometry. We’ll also define the coordinate system used to report the coordinate values.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="anatomy-of-simple-feature-objects.html#cb137-1" tabindex="-1"></a>poly.sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>( <span class="fu">list</span>(poly1.geom), <span class="at">crs =</span> <span class="dv">4326</span> )</span></code></pre></div>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="anatomy-of-simple-feature-objects.html#cb138-1" tabindex="-1"></a>poly.sfc</span></code></pre></div>
<pre><code>Geometry set for 1 feature 
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84</code></pre>
<p>Finally, to create the <code>sf</code> object, run the <code>st_sf()</code> function.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="anatomy-of-simple-feature-objects.html#cb140-1" tabindex="-1"></a>poly.sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(poly.sfc)</span>
<span id="cb140-2"><a href="anatomy-of-simple-feature-objects.html#cb140-2" tabindex="-1"></a>poly.sf</span></code></pre></div>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84
                        poly.sfc
1 POLYGON ((-66 43, -70 47, -...</code></pre>
<p>The coordinates column is assigned the name <code>poly.sfc</code> by default. If you wish to change the column name to <code>coords</code>, for example, type the following:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="anatomy-of-simple-feature-objects.html#cb142-1" tabindex="-1"></a><span class="fu">names</span>(poly.sf) <span class="ot">&lt;-</span> <span class="st">&quot;coords&quot;</span></span>
<span id="cb142-2"><a href="anatomy-of-simple-feature-objects.html#cb142-2" tabindex="-1"></a><span class="fu">st_geometry</span>(poly.sf) <span class="ot">&lt;-</span> <span class="st">&quot;coords&quot;</span></span>
<span id="cb142-3"><a href="anatomy-of-simple-feature-objects.html#cb142-3" tabindex="-1"></a>poly.sf</span></code></pre></div>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84
                          coords
1 POLYGON ((-66 43, -70 47, -...</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="anatomy-of-simple-feature-objects.html#cb144-1" tabindex="-1"></a><span class="fu">plot</span>(poly.sf, <span class="at">col =</span> <span class="st">&quot;bisque&quot;</span>, <span class="at">axes =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-30-1.png" width="168" /></p>
</div>
<div id="a-polygon-with-a-hole" class="section level4 unnumbered hasAnchor">
<h4>A polygon with a hole<a href="anatomy-of-simple-feature-objects.html#a-polygon-with-a-hole" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this example, we’ll add a hole to the polygon. Recall that its outer ring will need to be recorded in a counterclockwise direction and its hole in a clockwise direction.</p>
<p>The resulting data object will have the following structure.</p>
<p><img src="img/sf_fig2.png" /></p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="anatomy-of-simple-feature-objects.html#cb145-1" tabindex="-1"></a><span class="co"># Polygon 1</span></span>
<span id="cb145-2"><a href="anatomy-of-simple-feature-objects.html#cb145-2" tabindex="-1"></a>poly1.outer.crd <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">66</span>, <span class="dv">43</span>),<span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>, <span class="dv">47</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>,<span class="dv">43</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">66</span>, <span class="dv">43</span>) ) <span class="co"># Outer ring</span></span>
<span id="cb145-3"><a href="anatomy-of-simple-feature-objects.html#cb145-3" tabindex="-1"></a>poly1.inner.crd  <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">68</span>, <span class="dv">44</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>,<span class="dv">44</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>, <span class="dv">45</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">68</span>, <span class="dv">44</span>) ) <span class="co"># Inner ring</span></span></code></pre></div>
<p>Next, we combine the ring coordinates into a single geometric element. Note that this is done by combining the two coordinate matrices into a single list object.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="anatomy-of-simple-feature-objects.html#cb146-1" tabindex="-1"></a>poly1.geom <span class="ot">&lt;-</span> <span class="fu">st_polygon</span>( <span class="fu">list</span>(poly1.outer.crd, poly1.inner.crd))</span></code></pre></div>
<p>We now create the simple feature column object.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="anatomy-of-simple-feature-objects.html#cb147-1" tabindex="-1"></a>poly.sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>( <span class="fu">list</span>(poly1.geom), <span class="at">crs =</span> <span class="dv">4326</span> )</span></code></pre></div>
<p>Finally, to create the <code>sf</code> object, run the <code>st_sf()</code> function.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="anatomy-of-simple-feature-objects.html#cb148-1" tabindex="-1"></a>poly.sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(poly.sfc)</span></code></pre></div>
<p>We’ll take the opportunity to rename the coordinate column (even though this is not necessary).</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="anatomy-of-simple-feature-objects.html#cb149-1" tabindex="-1"></a><span class="fu">names</span>(poly.sf) <span class="ot">&lt;-</span> <span class="st">&quot;coords&quot;</span></span>
<span id="cb149-2"><a href="anatomy-of-simple-feature-objects.html#cb149-2" tabindex="-1"></a><span class="fu">st_geometry</span>(poly.sf) <span class="ot">&lt;-</span> <span class="st">&quot;coords&quot;</span></span>
<span id="cb149-3"><a href="anatomy-of-simple-feature-objects.html#cb149-3" tabindex="-1"></a>poly.sf</span></code></pre></div>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84
                          coords
1 POLYGON ((-66 43, -70 47, -...</code></pre>
<p>Let’s now plot the <code>sf</code> object.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="anatomy-of-simple-feature-objects.html#cb151-1" tabindex="-1"></a><span class="fu">plot</span>(poly.sf, <span class="at">col =</span> <span class="st">&quot;bisque&quot;</span>, <span class="at">axes =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-36-1.png" width="168" /></p>
</div>
<div id="combining-polygons-singlepart-features" class="section level4 unnumbered hasAnchor">
<h4>Combining polygons: singlepart features<a href="anatomy-of-simple-feature-objects.html#combining-polygons-singlepart-features" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this example, we’ll create two distinct polygons by adding a second polygon to the one created in the last step. The output will be a singlepart polygon feature (i.e. each polygon can be assigned its own unique attribute value).</p>
<p><img src="img/sf_fig3.png" /></p>
<p>We’ll create the second polygon (the first polygon having already been created in the previous section).</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="anatomy-of-simple-feature-objects.html#cb152-1" tabindex="-1"></a><span class="co"># Define coordinate matrix</span></span>
<span id="cb152-2"><a href="anatomy-of-simple-feature-objects.html#cb152-2" tabindex="-1"></a>poly2.crd <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">67</span>, <span class="dv">45</span>),<span class="fu">c</span>(<span class="sc">-</span><span class="dv">67</span>, <span class="dv">47</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">69</span>,<span class="dv">47</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">67</span>, <span class="dv">45</span>) ) </span>
<span id="cb152-3"><a href="anatomy-of-simple-feature-objects.html#cb152-3" tabindex="-1"></a></span>
<span id="cb152-4"><a href="anatomy-of-simple-feature-objects.html#cb152-4" tabindex="-1"></a><span class="co"># Create polygon geometry</span></span>
<span id="cb152-5"><a href="anatomy-of-simple-feature-objects.html#cb152-5" tabindex="-1"></a>poly2.geom <span class="ot">&lt;-</span> <span class="fu">st_polygon</span>( <span class="fu">list</span>(poly2.crd))</span></code></pre></div>
<p>Next, we combine the geometries into a simple feature column, <code>sfc</code>.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="anatomy-of-simple-feature-objects.html#cb153-1" tabindex="-1"></a>poly.sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>( <span class="fu">list</span>(poly1.geom , poly2.geom), <span class="at">crs =</span> <span class="dv">4326</span> )</span></code></pre></div>
<p>Each polygon has its own row in the <code>sfc</code> object.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="anatomy-of-simple-feature-objects.html#cb154-1" tabindex="-1"></a>poly.sfc</span></code></pre></div>
<pre><code>Geometry set for 2 features 
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84</code></pre>
<p>Finally, to create the <code>sf</code> object, run the <code>st_sf()</code> function.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="anatomy-of-simple-feature-objects.html#cb156-1" tabindex="-1"></a>poly.sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(poly.sfc)</span>
<span id="cb156-2"><a href="anatomy-of-simple-feature-objects.html#cb156-2" tabindex="-1"></a>poly.sf</span></code></pre></div>
<pre><code>Simple feature collection with 2 features and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84
                        poly.sfc
1 POLYGON ((-66 43, -70 47, -...
2 POLYGON ((-67 45, -67 47, -...</code></pre>
<p>We’ll go ahead and rename the geometry column to <code>coords</code>.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="anatomy-of-simple-feature-objects.html#cb158-1" tabindex="-1"></a><span class="fu">names</span>(poly.sf) <span class="ot">&lt;-</span> <span class="st">&quot;coords&quot;</span></span>
<span id="cb158-2"><a href="anatomy-of-simple-feature-objects.html#cb158-2" tabindex="-1"></a><span class="fu">st_geometry</span>(poly.sf) <span class="ot">&lt;-</span> <span class="st">&quot;coords&quot;</span></span>
<span id="cb158-3"><a href="anatomy-of-simple-feature-objects.html#cb158-3" tabindex="-1"></a>poly.sf</span></code></pre></div>
<pre><code>Simple feature collection with 2 features and 0 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84
                          coords
1 POLYGON ((-66 43, -70 47, -...
2 POLYGON ((-67 45, -67 47, -...</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="anatomy-of-simple-feature-objects.html#cb160-1" tabindex="-1"></a><span class="fu">plot</span>(poly.sf, <span class="at">col =</span> <span class="st">&quot;bisque&quot;</span>, <span class="at">axes =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-42-1.png" width="168" /></p>
</div>
<div id="adding-attributes" class="section level4 unnumbered hasAnchor">
<h4>Adding attributes<a href="anatomy-of-simple-feature-objects.html#adding-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As with the point <code>sf</code> object created earlier in this exercise, we can append columns to the polygon <code>sf</code> object. But make sure that the order of the attribute values match the order in which the polygons are stored in the <code>sf</code> object.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="anatomy-of-simple-feature-objects.html#cb161-1" tabindex="-1"></a>poly.sf<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)</span>
<span id="cb161-2"><a href="anatomy-of-simple-feature-objects.html#cb161-2" tabindex="-1"></a>poly.sf</span></code></pre></div>
<pre><code>Simple feature collection with 2 features and 1 field
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84
                          coords id
1 POLYGON ((-66 43, -70 47, -...  A
2 POLYGON ((-67 45, -67 47, -...  B</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="anatomy-of-simple-feature-objects.html#cb163-1" tabindex="-1"></a><span class="fu">plot</span>(poly.sf[<span class="st">&quot;id&quot;</span>],  <span class="at">axes =</span> <span class="cn">TRUE</span>, <span class="at">main =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-44-1.png" width="288" /></p>
</div>
</div>
<div id="multipolygon-simple-feature-multipart-features" class="section level3 unnumbered hasAnchor">
<h3><code>MULTIPOLYGON</code> simple feature: multipart features<a href="anatomy-of-simple-feature-objects.html#multipolygon-simple-feature-multipart-features" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If multiple polygons are to share the same attribute record (a scenario referred to as multipart geometry in some GIS applications), you need to use the <code>st_multipolygon()</code> function when creating the <code>sfg</code> object.</p>
<p>In this example, we’ll combine the two polygon created in the last example into a single geometry element.</p>
<p><img src="img/sf_fig4.png" /></p>
<p>The multipolygon function groups polygons into a single list. If one of the polygons is made up of more than one ring (e.g. a polygon with a whole), its geometry is combined into a single sub-list object.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="anatomy-of-simple-feature-objects.html#cb164-1" tabindex="-1"></a><span class="co"># Create multipolygon geometry</span></span>
<span id="cb164-2"><a href="anatomy-of-simple-feature-objects.html#cb164-2" tabindex="-1"></a>mpoly1.sfg  <span class="ot">&lt;-</span> <span class="fu">st_multipolygon</span>( <span class="fu">list</span>(</span>
<span id="cb164-3"><a href="anatomy-of-simple-feature-objects.html#cb164-3" tabindex="-1"></a>                                  <span class="fu">list</span>( poly1.outer.crd,  <span class="co"># Outer loop</span></span>
<span id="cb164-4"><a href="anatomy-of-simple-feature-objects.html#cb164-4" tabindex="-1"></a>                                        poly1.inner.crd), <span class="co"># Inner loop</span></span>
<span id="cb164-5"><a href="anatomy-of-simple-feature-objects.html#cb164-5" tabindex="-1"></a>                                  <span class="fu">list</span>( poly2.crd)) )     <span class="co"># Separate polygon</span></span>
<span id="cb164-6"><a href="anatomy-of-simple-feature-objects.html#cb164-6" tabindex="-1"></a></span>
<span id="cb164-7"><a href="anatomy-of-simple-feature-objects.html#cb164-7" tabindex="-1"></a><span class="co"># Create simple feature column object</span></span>
<span id="cb164-8"><a href="anatomy-of-simple-feature-objects.html#cb164-8" tabindex="-1"></a>mpoly.sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>( <span class="fu">list</span>(mpoly1.sfg), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb164-9"><a href="anatomy-of-simple-feature-objects.html#cb164-9" tabindex="-1"></a></span>
<span id="cb164-10"><a href="anatomy-of-simple-feature-objects.html#cb164-10" tabindex="-1"></a><span class="co"># Create simple feature object</span></span>
<span id="cb164-11"><a href="anatomy-of-simple-feature-objects.html#cb164-11" tabindex="-1"></a>mpoly.sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(mpoly.sfc)</span>
<span id="cb164-12"><a href="anatomy-of-simple-feature-objects.html#cb164-12" tabindex="-1"></a></span>
<span id="cb164-13"><a href="anatomy-of-simple-feature-objects.html#cb164-13" tabindex="-1"></a>mpoly.sf</span></code></pre></div>
<pre><code>Simple feature collection with 1 feature and 0 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
Geodetic CRS:  WGS 84
                       mpoly.sfc
1 MULTIPOLYGON (((-66 43, -70...</code></pre>
<p>Note the single geometric entry in the table.</p>
<div id="mixing-singlepart-and-multipart-elements" class="section level4 unnumbered hasAnchor">
<h4>Mixing singlepart and multipart elements<a href="anatomy-of-simple-feature-objects.html#mixing-singlepart-and-multipart-elements" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A <code>MULTIPOLGON</code> geometry can be used to store a single polygon as well. In this example, we’ll create a <code>MULTIPOLYGON</code> <code>sf</code> object that will combine multipart and singlepart polygons.</p>
<p><img src="img/sf_fig5.png" /></p>
<p>To make this example more interesting, we’ll have one of the elements (<code>poly4.coords</code>) overlapping several polygons. Note that any overlapping polygon needs to be in its own <code>MULTIPOLYGON</code> or <code>POLYGON</code> entry–if it’s added to an existing entry (i.e. combined with another polygon geometry), it may be treated as a hole, even if the coordinate values are recorded in a counterclockwise direction.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="anatomy-of-simple-feature-objects.html#cb166-1" tabindex="-1"></a>poly3.coords <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">66</span>, <span class="dv">44</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">64</span>, <span class="dv">44</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">66</span>,<span class="dv">47</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">66</span>, <span class="dv">44</span>) )</span>
<span id="cb166-2"><a href="anatomy-of-simple-feature-objects.html#cb166-2" tabindex="-1"></a>poly4.coords <span class="ot">&lt;-</span> <span class="fu">rbind</span>( <span class="fu">c</span>(<span class="sc">-</span><span class="dv">67</span>, <span class="dv">43</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">64</span>, <span class="dv">46</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">66.5</span>,<span class="dv">46</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="dv">67</span>, <span class="dv">43</span>) ) </span></code></pre></div>
<p>Note the embedded <code>list()</code> functions in the following code chunk.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="anatomy-of-simple-feature-objects.html#cb167-1" tabindex="-1"></a>mpoly1.sfg  <span class="ot">&lt;-</span> <span class="fu">st_multipolygon</span>( <span class="fu">list</span>(</span>
<span id="cb167-2"><a href="anatomy-of-simple-feature-objects.html#cb167-2" tabindex="-1"></a>                                  <span class="fu">list</span>( poly1.outer.crd,  <span class="co"># Outer loop</span></span>
<span id="cb167-3"><a href="anatomy-of-simple-feature-objects.html#cb167-3" tabindex="-1"></a>                                        poly1.inner.crd), <span class="co"># Inner loop</span></span>
<span id="cb167-4"><a href="anatomy-of-simple-feature-objects.html#cb167-4" tabindex="-1"></a>                                  <span class="fu">list</span>( poly2.crd)) )     <span class="co"># Separate poly</span></span>
<span id="cb167-5"><a href="anatomy-of-simple-feature-objects.html#cb167-5" tabindex="-1"></a>mpoly2.sfg  <span class="ot">&lt;-</span> <span class="fu">st_multipolygon</span>( <span class="fu">list</span>(</span>
<span id="cb167-6"><a href="anatomy-of-simple-feature-objects.html#cb167-6" tabindex="-1"></a>                                  <span class="fu">list</span>(poly3.coords)))  <span class="co"># Unique polygon</span></span>
<span id="cb167-7"><a href="anatomy-of-simple-feature-objects.html#cb167-7" tabindex="-1"></a>mpoly3.sfg  <span class="ot">&lt;-</span> <span class="fu">st_multipolygon</span>( <span class="fu">list</span>(</span>
<span id="cb167-8"><a href="anatomy-of-simple-feature-objects.html#cb167-8" tabindex="-1"></a>                                  <span class="fu">list</span>(poly4.coords)) )  <span class="co"># Unique polygon</span></span></code></pre></div>
<p>Finally, we’ll generate the simple feature object, <code>sf</code>, via the creation of the simple feature column object, <code>sfc</code>. We’ll also assign the WGS 1984 geographic coordinate system (epsg = <code>4326</code>).</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="anatomy-of-simple-feature-objects.html#cb168-1" tabindex="-1"></a>mpoly.sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>( <span class="fu">list</span>(mpoly1.sfg, mpoly2.sfg, mpoly3.sfg), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb168-2"><a href="anatomy-of-simple-feature-objects.html#cb168-2" tabindex="-1"></a>mpoly.sf <span class="ot">&lt;-</span> <span class="fu">st_sf</span>(mpoly.sfc)</span></code></pre></div>
<p>Next, we’ll add attribute values to each geometric object before generating a plot. We’ll apply a transparency to the polygons to reveal the overlapping geometries.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="anatomy-of-simple-feature-objects.html#cb169-1" tabindex="-1"></a>mpoly.sf<span class="sc">$</span>ids <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)</span>
<span id="cb169-2"><a href="anatomy-of-simple-feature-objects.html#cb169-2" tabindex="-1"></a><span class="fu">plot</span>(mpoly.sf[<span class="st">&quot;ids&quot;</span>], <span class="at">axes =</span> <span class="cn">TRUE</span>, <span class="at">main =</span> <span class="cn">NULL</span>,</span>
<span id="cb169-3"><a href="anatomy-of-simple-feature-objects.html#cb169-3" tabindex="-1"></a>     <span class="at">pal =</span> <span class="fu">sf.colors</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">categorical =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p><img src="A03-sf-objects_files/figure-html/unnamed-chunk-49-1.png" width="288" /></p>
<p>Note how polygon <code>C</code> overlaps the other polygon elements. We can check that this does not violate simple feature rules via the <code>st_is_valid()</code> function.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="anatomy-of-simple-feature-objects.html#cb170-1" tabindex="-1"></a><span class="fu">st_is_valid</span>(mpoly.sf)</span></code></pre></div>
<pre><code>[1] TRUE TRUE TRUE</code></pre>
<p>This returns three boolean values, one for each element. A value of <code>TRUE</code> indicates that the geometry does not violate any rule.</p>
<p>Avoid storing overlapping polygons in a same MULTIPOLYGON geometry. Doing so will create an “invalid” <code>sf</code> object which may pose problems with certain functions.</p>
</div>
</div>
</div>
<div id="extracting-geometry-from-an-sf-object" class="section level2 unnumbered hasAnchor">
<h2>Extracting geometry from an <code>sf</code> object<a href="anatomy-of-simple-feature-objects.html#extracting-geometry-from-an-sf-object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can extract the geometry from an <code>sf</code> object via the <code>st_geometry</code> function. For example,</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="anatomy-of-simple-feature-objects.html#cb172-1" tabindex="-1"></a><span class="co"># Create sfc from sf</span></span>
<span id="cb172-2"><a href="anatomy-of-simple-feature-objects.html#cb172-2" tabindex="-1"></a><span class="fu">st_geometry</span>(mpoly.sf)</span></code></pre></div>
<pre><code>Geometry set for 3 features 
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -64 ymax: 47
Geodetic CRS:  WGS 84</code></pre>
<p>To extract coordinates from a single record in a WKT (well known text) format, type:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="anatomy-of-simple-feature-objects.html#cb174-1" tabindex="-1"></a><span class="fu">st_geometry</span>(mpoly.sf)[[<span class="dv">1</span>]]</span></code></pre></div>
<p>If you want the extract the coordinate pairs of the first element in a list format type:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="anatomy-of-simple-feature-objects.html#cb175-1" tabindex="-1"></a><span class="fu">st_geometry</span>(mpoly.sf)[[<span class="dv">1</span>]][]</span></code></pre></div>
<pre><code>[[1]]
[[1]][[1]]
     [,1] [,2]
[1,]  -66   43
[2,]  -70   47
[3,]  -70   43
[4,]  -66   43

[[1]][[2]]
     [,1] [,2]
[1,]  -68   44
[2,]  -69   44
[3,]  -69   45
[4,]  -68   44


[[2]]
[[2]][[1]]
     [,1] [,2]
[1,]  -67   45
[2,]  -67   47
[3,]  -69   47
[4,]  -67   45</code></pre>
</div>
<div id="alternative-syntax" class="section level2 unnumbered hasAnchor">
<h2>Alternative syntax<a href="anatomy-of-simple-feature-objects.html#alternative-syntax" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this tutorial, you were instructed to define the coordinate pairs in matrices. This is probably the simplest way to enter coordinate values manually. You can, however, bypass the creation of a matrix and simply define the coordinate pairs using the WKT syntax.</p>
<p>For example, to generate the <code>POLYGON</code> geometry object from above, you could simply type:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="anatomy-of-simple-feature-objects.html#cb177-1" tabindex="-1"></a><span class="fu">st_as_sfc</span>(  <span class="st">&quot;POLYGON ((-66 43, -70 47, -70 43, -66 43), (-68 44, -69 44, -69 45, -68 44))&quot;</span> )</span></code></pre></div>
<pre><code>Geometry set for 1 feature 
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: -70 ymin: 43 xmax: -66 ymax: 47
CRS:           NA</code></pre>
<p>Note that the WKT syntax is that listed in the <code>sfc</code> and <code>sf</code> geometry columns. Also note that the function <code>st_as_sfc</code> is used as opposed to the <code>st_sfc</code> function used with matrices in earlier steps.</p>
</div>
<div id="additional-resources" class="section level2 unnumbered hasAnchor">
<h2>Additional resources<a href="anatomy-of-simple-feature-objects.html#additional-resources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Pebesma, Edzer. 2018. “Simple Features for R: Standardized Support for Spatial Vector Data”, The R Journal, pages 439-446.</li>
<li>Pebesma, Edzar and Bivand, Roger. “Spatial Data Science: with applications in R”, <a href="https://keen-swartz-3146c4.netlify.app/" class="uri">https://keen-swartz-3146c4.netlify.app/</a></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mapping-data-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vector-operations-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false,
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
