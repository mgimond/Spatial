<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>B Mapping data in R | Intro to GIS and Spatial Analysis</title>
  <meta name="description" content="This is a compilation of lecture notes that accompany my Intro to GIS and Spatial Analysis course." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="B Mapping data in R | Intro to GIS and Spatial Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a compilation of lecture notes that accompany my Intro to GIS and Spatial Analysis course." />
  <meta name="github-repo" content="mgimond/spatial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="B Mapping data in R | Intro to GIS and Spatial Analysis" />
  
  <meta name="twitter:description" content="This is a compilation of lecture notes that accompany my Intro to GIS and Spatial Analysis course." />
  

<meta name="author" content="Manuel Gimond" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="reading-and-writing-spatial-data-in-r.html"/>
<link rel="next" href="anatomy-of-simple-feature-objects.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introGIS.html"><a href="introGIS.html"><i class="fa fa-check"></i><b>1</b> Introduction to GIS</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introGIS.html"><a href="introGIS.html#what-is-a-gis"><i class="fa fa-check"></i><b>1.1</b> What is a GIS?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introGIS.html"><a href="introGIS.html#gis-software"><i class="fa fa-check"></i><b>1.1.1</b> GIS software</a></li>
<li class="chapter" data-level="1.1.2" data-path="introGIS.html"><a href="introGIS.html#qgis"><i class="fa fa-check"></i><b>1.1.2</b> QGIS</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introGIS.html"><a href="introGIS.html#what-is-spatial-analysis"><i class="fa fa-check"></i><b>1.2</b> What is Spatial Analysis?</a></li>
<li class="chapter" data-level="1.3" data-path="introGIS.html"><a href="introGIS.html#whats-in-an-acronym"><i class="fa fa-check"></i><b>1.3</b> What’s in an Acronym?</a></li>
</ul></li>
<li class="part"><span><b>PART 1: Working with spatial data</b></span></li>
<li class="chapter" data-level="2" data-path="chp02_0.html"><a href="chp02_0.html"><i class="fa fa-check"></i><b>2</b> Feature Representation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chp02_0.html"><a href="chp02_0.html#vector-vs.-raster"><i class="fa fa-check"></i><b>2.1</b> Vector vs. Raster</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="chp02_0.html"><a href="chp02_0.html#vector"><i class="fa fa-check"></i><b>2.1.1</b> Vector</a></li>
<li class="chapter" data-level="2.1.2" data-path="chp02_0.html"><a href="chp02_0.html#raster"><i class="fa fa-check"></i><b>2.1.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chp02_0.html"><a href="chp02_0.html#object-vs.-field"><i class="fa fa-check"></i><b>2.2</b> Object vs. Field</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chp02_0.html"><a href="chp02_0.html#object-view"><i class="fa fa-check"></i><b>2.2.1</b> Object View</a></li>
<li class="chapter" data-level="2.2.2" data-path="chp02_0.html"><a href="chp02_0.html#field-view"><i class="fa fa-check"></i><b>2.2.2</b> Field View</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chp02_0.html"><a href="chp02_0.html#scale"><i class="fa fa-check"></i><b>2.3</b> Scale</a></li>
<li class="chapter" data-level="2.4" data-path="chp02_0.html"><a href="chp02_0.html#attribute-tables"><i class="fa fa-check"></i><b>2.4</b> Attribute Tables</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="chp02_0.html"><a href="chp02_0.html#measurement-levels"><i class="fa fa-check"></i><b>2.4.1</b> Measurement Levels</a></li>
<li class="chapter" data-level="2.4.2" data-path="chp02_0.html"><a href="chp02_0.html#data-type"><i class="fa fa-check"></i><b>2.4.2</b> Data type</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="gis-data-management.html"><a href="gis-data-management.html"><i class="fa fa-check"></i><b>3</b> GIS Data Management</a>
<ul>
<li class="chapter" data-level="3.1" data-path="gis-data-management.html"><a href="gis-data-management.html#gis-file-data-formats"><i class="fa fa-check"></i><b>3.1</b> GIS File Data Formats</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="gis-data-management.html"><a href="gis-data-management.html#vector-data-file-formats"><i class="fa fa-check"></i><b>3.1.1</b> Vector Data File Formats</a></li>
<li class="chapter" data-level="3.1.2" data-path="gis-data-management.html"><a href="gis-data-management.html#raster-data-file-formats"><i class="fa fa-check"></i><b>3.1.2</b> Raster Data File Formats</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="gis-data-management.html"><a href="gis-data-management.html#managing-gis-files-in-arcgis"><i class="fa fa-check"></i><b>3.2</b> Managing GIS Files in ArcGIS</a></li>
<li class="chapter" data-level="3.3" data-path="gis-data-management.html"><a href="gis-data-management.html#managing-a-map-project-in-arcgis"><i class="fa fa-check"></i><b>3.3</b> Managing a Map Project in ArcGIS</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="symbolizing-features.html"><a href="symbolizing-features.html"><i class="fa fa-check"></i><b>4</b> Symbolizing features</a>
<ul>
<li class="chapter" data-level="4.1" data-path="symbolizing-features.html"><a href="symbolizing-features.html#color"><i class="fa fa-check"></i><b>4.1</b> Color</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="symbolizing-features.html"><a href="symbolizing-features.html#hue"><i class="fa fa-check"></i><b>4.1.1</b> Hue</a></li>
<li class="chapter" data-level="4.1.2" data-path="symbolizing-features.html"><a href="symbolizing-features.html#lightness"><i class="fa fa-check"></i><b>4.1.2</b> Lightness</a></li>
<li class="chapter" data-level="4.1.3" data-path="symbolizing-features.html"><a href="symbolizing-features.html#saturation"><i class="fa fa-check"></i><b>4.1.3</b> Saturation</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="symbolizing-features.html"><a href="symbolizing-features.html#color-space"><i class="fa fa-check"></i><b>4.2</b> Color Space</a></li>
<li class="chapter" data-level="4.3" data-path="symbolizing-features.html"><a href="symbolizing-features.html#classification"><i class="fa fa-check"></i><b>4.3</b> Classification</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="symbolizing-features.html"><a href="symbolizing-features.html#qualitative-color-scheme"><i class="fa fa-check"></i><b>4.3.1</b> Qualitative color scheme</a></li>
<li class="chapter" data-level="4.3.2" data-path="symbolizing-features.html"><a href="symbolizing-features.html#sequential-color-scheme"><i class="fa fa-check"></i><b>4.3.2</b> Sequential color scheme</a></li>
<li class="chapter" data-level="4.3.3" data-path="symbolizing-features.html"><a href="symbolizing-features.html#divergent-color-scheme"><i class="fa fa-check"></i><b>4.3.3</b> Divergent color scheme</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="symbolizing-features.html"><a href="symbolizing-features.html#so-how-do-i-find-a-proper-color-scheme-for-my-data"><i class="fa fa-check"></i><b>4.4</b> So how do I find a proper color scheme for my data?</a></li>
<li class="chapter" data-level="4.5" data-path="symbolizing-features.html"><a href="symbolizing-features.html#classification-intervals"><i class="fa fa-check"></i><b>4.5</b> Classification Intervals</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="symbolizing-features.html"><a href="symbolizing-features.html#an-interactive-example"><i class="fa fa-check"></i><b>4.5.1</b> An Interactive Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html"><i class="fa fa-check"></i><b>5</b> Pitfalls to avoid</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#representing-count"><i class="fa fa-check"></i><b>5.1</b> Representing Count</a></li>
<li class="chapter" data-level="5.2" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#maup"><i class="fa fa-check"></i><b>5.2</b> MAUP</a></li>
<li class="chapter" data-level="5.3" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#ecological-fallacy"><i class="fa fa-check"></i><b>5.3</b> Ecological Fallacy</a></li>
<li class="chapter" data-level="5.4" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#mapping-rates"><i class="fa fa-check"></i><b>5.4</b> Mapping rates</a></li>
<li class="chapter" data-level="5.5" data-path="pitfalls-to-avoid.html"><a href="pitfalls-to-avoid.html#coping-with-unstable-rates"><i class="fa fa-check"></i><b>5.5</b> Coping with Unstable Rates</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="good-map-making-tips.html"><a href="good-map-making-tips.html"><i class="fa fa-check"></i><b>6</b> Good Map Making Tips</a>
<ul>
<li class="chapter" data-level="6.1" data-path="good-map-making-tips.html"><a href="good-map-making-tips.html#elements-of-a-map"><i class="fa fa-check"></i><b>6.1</b> Elements of a map</a></li>
<li class="chapter" data-level="6.2" data-path="good-map-making-tips.html"><a href="good-map-making-tips.html#how-to-create-a-good-map"><i class="fa fa-check"></i><b>6.2</b> How to create a <em>good</em> map</a></li>
<li class="chapter" data-level="6.3" data-path="good-map-making-tips.html"><a href="good-map-making-tips.html#typefaces-and-fonts"><i class="fa fa-check"></i><b>6.3</b> Typefaces and Fonts</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="uncertainty-in-census-data.html"><a href="uncertainty-in-census-data.html"><i class="fa fa-check"></i><b>7</b> Uncertainty in Census Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="uncertainty-in-census-data.html"><a href="uncertainty-in-census-data.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="uncertainty-in-census-data.html"><a href="uncertainty-in-census-data.html#mapping-uncertainty"><i class="fa fa-check"></i><b>7.2</b> Mapping uncertainty</a></li>
<li class="chapter" data-level="7.3" data-path="uncertainty-in-census-data.html"><a href="uncertainty-in-census-data.html#problems-in-mapping-uncertainty"><i class="fa fa-check"></i><b>7.3</b> Problems in mapping uncertainty</a></li>
<li class="chapter" data-level="7.4" data-path="uncertainty-in-census-data.html"><a href="uncertainty-in-census-data.html#class-comparison-maps"><i class="fa fa-check"></i><b>7.4</b> Class comparison maps</a></li>
<li class="chapter" data-level="7.5" data-path="uncertainty-in-census-data.html"><a href="uncertainty-in-census-data.html#problem-when-performing-bivariate-analysis"><i class="fa fa-check"></i><b>7.5</b> Problem when performing bivariate analysis</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html"><i class="fa fa-check"></i><b>8</b> Spatial Operations and Vector Overlays</a>
<ul>
<li class="chapter" data-level="8.1" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#selection-by-attribute"><i class="fa fa-check"></i><b>8.1</b> Selection by Attribute</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#set-algebra"><i class="fa fa-check"></i><b>8.1.1</b> Set Algebra</a></li>
<li class="chapter" data-level="8.1.2" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#boolean-algebra"><i class="fa fa-check"></i><b>8.1.2</b> Boolean Algebra</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#selection-by-location"><i class="fa fa-check"></i><b>8.2</b> Selection by location</a></li>
<li class="chapter" data-level="8.3" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#vector-overlay"><i class="fa fa-check"></i><b>8.3</b> Vector Overlay</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#clip"><i class="fa fa-check"></i><b>8.3.1</b> Clip</a></li>
<li class="chapter" data-level="8.3.2" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#intersect"><i class="fa fa-check"></i><b>8.3.2</b> Intersect</a></li>
<li class="chapter" data-level="8.3.3" data-path="spatial-operations-and-vector-overlays.html"><a href="spatial-operations-and-vector-overlays.html#union"><i class="fa fa-check"></i><b>8.3.3</b> Union</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chp09_0.html"><a href="chp09_0.html"><i class="fa fa-check"></i><b>9</b> Coordinate Systems</a>
<ul>
<li class="chapter" data-level="9.1" data-path="chp09_0.html"><a href="chp09_0.html#geographic-coordinate-systems"><i class="fa fa-check"></i><b>9.1</b> Geographic Coordinate Systems</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="chp09_0.html"><a href="chp09_0.html#sphere-and-ellipsoid"><i class="fa fa-check"></i><b>9.1.1</b> Sphere and Ellipsoid</a></li>
<li class="chapter" data-level="9.1.2" data-path="chp09_0.html"><a href="chp09_0.html#geoid"><i class="fa fa-check"></i><b>9.1.2</b> Geoid</a></li>
<li class="chapter" data-level="9.1.3" data-path="chp09_0.html"><a href="chp09_0.html#datum"><i class="fa fa-check"></i><b>9.1.3</b> Datum</a></li>
<li class="chapter" data-level="9.1.4" data-path="chp09_0.html"><a href="chp09_0.html#building-the-geographic-coordinate-system"><i class="fa fa-check"></i><b>9.1.4</b> Building the Geographic Coordinate System</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="chp09_0.html"><a href="chp09_0.html#projected-coordinate-systems"><i class="fa fa-check"></i><b>9.2</b> Projected Coordinate Systems</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="chp09_0.html"><a href="chp09_0.html#planar-projections"><i class="fa fa-check"></i><b>9.2.1</b> Planar Projections</a></li>
<li class="chapter" data-level="9.2.2" data-path="chp09_0.html"><a href="chp09_0.html#cylindrical-projection"><i class="fa fa-check"></i><b>9.2.2</b> Cylindrical Projection</a></li>
<li class="chapter" data-level="9.2.3" data-path="chp09_0.html"><a href="chp09_0.html#conical-projection"><i class="fa fa-check"></i><b>9.2.3</b> Conical Projection</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="chp09_0.html"><a href="chp09_0.html#spatial-properties"><i class="fa fa-check"></i><b>9.3</b> Spatial Properties</a></li>
<li class="chapter" data-level="9.4" data-path="chp09_0.html"><a href="chp09_0.html#geodesic-geometries"><i class="fa fa-check"></i><b>9.4</b> Geodesic geometries</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chp10_0.html"><a href="chp10_0.html"><i class="fa fa-check"></i><b>10</b> Map Algebra</a>
<ul>
<li class="chapter" data-level="10.1" data-path="chp10_0.html"><a href="chp10_0.html#local-operations-and-functions"><i class="fa fa-check"></i><b>10.1</b> Local operations and functions</a></li>
<li class="chapter" data-level="10.2" data-path="chp10_0.html"><a href="chp10_0.html#focal-operations-and-functions"><i class="fa fa-check"></i><b>10.2</b> Focal operations and functions</a></li>
<li class="chapter" data-level="10.3" data-path="chp10_0.html"><a href="chp10_0.html#zonal-operations-and-functions"><i class="fa fa-check"></i><b>10.3</b> Zonal operations and functions</a></li>
<li class="chapter" data-level="10.4" data-path="chp10_0.html"><a href="chp10_0.html#global-operations-and-functions"><i class="fa fa-check"></i><b>10.4</b> Global operations and functions</a></li>
<li class="chapter" data-level="10.5" data-path="chp10_0.html"><a href="chp10_0.html#operators-and-functions"><i class="fa fa-check"></i><b>10.5</b> Operators and functions</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="chp10_0.html"><a href="chp10_0.html#mathematical-operators-and-functions"><i class="fa fa-check"></i><b>10.5.1</b> Mathematical operators and functions</a></li>
<li class="chapter" data-level="10.5.2" data-path="chp10_0.html"><a href="chp10_0.html#logical-comparison"><i class="fa fa-check"></i><b>10.5.2</b> Logical comparison</a></li>
<li class="chapter" data-level="10.5.3" data-path="chp10_0.html"><a href="chp10_0.html#boolean-or-logical-operators"><i class="fa fa-check"></i><b>10.5.3</b> Boolean (or Logical) operators</a></li>
<li class="chapter" data-level="10.5.4" data-path="chp10_0.html"><a href="chp10_0.html#combining-operations"><i class="fa fa-check"></i><b>10.5.4</b> Combining operations</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>PART 2: Spatial Analysis</b></span></li>
<li class="chapter" data-level="11" data-path="chp11_0.html"><a href="chp11_0.html"><i class="fa fa-check"></i><b>11</b> Point Pattern Analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="chp11_0.html"><a href="chp11_0.html#centrography"><i class="fa fa-check"></i><b>11.1</b> Centrography</a></li>
<li class="chapter" data-level="11.2" data-path="chp11_0.html"><a href="chp11_0.html#density-based-analysis"><i class="fa fa-check"></i><b>11.2</b> Density based analysis</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="chp11_0.html"><a href="chp11_0.html#global-density"><i class="fa fa-check"></i><b>11.2.1</b> Global density</a></li>
<li class="chapter" data-level="11.2.2" data-path="chp11_0.html"><a href="chp11_0.html#local-density"><i class="fa fa-check"></i><b>11.2.2</b> Local density</a></li>
<li class="chapter" data-level="11.2.3" data-path="chp11_0.html"><a href="chp11_0.html#modeling-intensity-as-a-function-of-a-covariate"><i class="fa fa-check"></i><b>11.2.3</b> Modeling intensity as a function of a covariate</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="chp11_0.html"><a href="chp11_0.html#distance-based-analysis"><i class="fa fa-check"></i><b>11.3</b> Distance based analysis</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="chp11_0.html"><a href="chp11_0.html#average-nearest-neighbor"><i class="fa fa-check"></i><b>11.3.1</b> Average Nearest Neighbor</a></li>
<li class="chapter" data-level="11.3.2" data-path="chp11_0.html"><a href="chp11_0.html#k-and-l-functions"><i class="fa fa-check"></i><b>11.3.2</b> K and L functions</a></li>
<li class="chapter" data-level="11.3.3" data-path="chp11_0.html"><a href="chp11_0.html#the-pair-correlation-function-g"><i class="fa fa-check"></i><b>11.3.3</b> The Pair Correlation Function <span class="math inline">\(g\)</span></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="chp11_0.html"><a href="chp11_0.html#first-and-second-order-effects"><i class="fa fa-check"></i><b>11.4</b> First and second order effects</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>12</b> Hypothesis testing</a>
<ul>
<li class="chapter" data-level="12.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#irpcsr"><i class="fa fa-check"></i><b>12.1</b> IRP/CSR</a></li>
<li class="chapter" data-level="12.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#testing-for-csr-with-the-ann-tool"><i class="fa fa-check"></i><b>12.2</b> Testing for CSR with the ANN tool</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#arcgis-average-nearest-neighbor-tool"><i class="fa fa-check"></i><b>12.2.1</b> ArcGIS’ Average Nearest Neighbor Tool</a></li>
<li class="chapter" data-level="12.2.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#a-better-approach-a-monte-carlo-test"><i class="fa fa-check"></i><b>12.2.2</b> A better approach: a Monte Carlo test</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#alternatives-to-csrirp"><i class="fa fa-check"></i><b>12.3</b> Alternatives to CSR/IRP</a></li>
<li class="chapter" data-level="12.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#monte-carlo-test-with-k-and-l-functions"><i class="fa fa-check"></i><b>12.4</b> Monte Carlo test with K and L functions</a></li>
<li class="chapter" data-level="12.5" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#PPM"><i class="fa fa-check"></i><b>12.5</b> Testing for a covariate effect</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html"><i class="fa fa-check"></i><b>13</b> Spatial Autocorrelation</a>
<ul>
<li class="chapter" data-level="13.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#global-morans-i"><i class="fa fa-check"></i><b>13.1</b> Global Moran’s I</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#computing-the-morans-i"><i class="fa fa-check"></i><b>13.1.1</b> Computing the Moran’s I</a></li>
<li class="chapter" data-level="13.1.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#monte-carlo-approach-to-estimating-significance"><i class="fa fa-check"></i><b>13.1.2</b> Monte Carlo approach to estimating significance</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#morans-i-at-different-lags"><i class="fa fa-check"></i><b>13.2</b> Moran’s I at different lags</a></li>
<li class="chapter" data-level="13.3" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#local-morans-i"><i class="fa fa-check"></i><b>13.3</b> Local Moran’s I</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html"><i class="fa fa-check"></i><b>14</b> Spatial Interpolation</a>
<ul>
<li class="chapter" data-level="14.1" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#deterministic-approach-to-interpolation"><i class="fa fa-check"></i><b>14.1</b> Deterministic Approach to Interpolation</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#proximity-interpolation"><i class="fa fa-check"></i><b>14.1.1</b> Proximity interpolation</a></li>
<li class="chapter" data-level="14.1.2" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#inverse-distance-weighted-idw"><i class="fa fa-check"></i><b>14.1.2</b> Inverse Distance Weighted (IDW)</a></li>
<li class="chapter" data-level="14.1.3" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#fine-tuning-the-interpolation-parameters"><i class="fa fa-check"></i><b>14.1.3</b> Fine tuning the interpolation parameters</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#statistical-approach-to-interpolation"><i class="fa fa-check"></i><b>14.2</b> Statistical Approach to Interpolation</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#trend-surfaces"><i class="fa fa-check"></i><b>14.2.1</b> Trend Surfaces</a></li>
<li class="chapter" data-level="14.2.2" data-path="spatial-interpolation.html"><a href="spatial-interpolation.html#ordinary-kriging"><i class="fa fa-check"></i><b>14.2.2</b> Ordinary Kriging</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>15</b> References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html"><i class="fa fa-check"></i><b>A</b> Reading and writing spatial data in R</a>
<ul>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_2"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_3"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4"><i class="fa fa-check"></i>Creating spatial objects</a>
<ul>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_1"><i class="fa fa-check"></i>Reading a shapefile</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_2"><i class="fa fa-check"></i>Reading a GeoPackage</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_3"><i class="fa fa-check"></i>Reading a raster</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_5"><i class="fa fa-check"></i>Creating a spatial object from a data frame</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_4_6"><i class="fa fa-check"></i>Geocoding street addresses</a></li>
</ul></li>
<li><a href="reading-and-writing-spatial-data-in-r.html#app1_5">Converting from an <code>sf</code> object</a>
<ul>
<li><a href="reading-and-writing-spatial-data-in-r.html#app1_5_1">Converting an <code>sf</code> object to a <code>Spatial*</code> object (<code>spdep</code>/<code>sp</code>)</a></li>
<li><a href="reading-and-writing-spatial-data-in-r.html#app1_5_2">Converting an <code>sf</code> polygon object to an <code>owin</code> object</a></li>
<li><a href="reading-and-writing-spatial-data-in-r.html#app1_5_3">Converting an <code>sf</code> point object to a <code>ppp</code> object</a></li>
<li><a href="reading-and-writing-spatial-data-in-r.html#app1_5_4">Converting a <code>raster</code> object to an <code>im</code> object (<code>spatstat</code>)</a></li>
</ul></li>
<li><a href="reading-and-writing-spatial-data-in-r.html#app1_6">Converting to an <code>sf</code> object</a></li>
<li><a href="reading-and-writing-spatial-data-in-r.html#app1_7">Dissecting the <code>sf</code> file object</a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-spatial-data-in-r.html"><a href="reading-and-writing-spatial-data-in-r.html#app1_8"><i class="fa fa-check"></i>Exporting to different data file formats</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html"><i class="fa fa-check"></i><b>B</b> Mapping data in R</a>
<ul>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#sample-files-for-this-exercise"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li><a href="mapping-data-in-r.html#tmap"><code>tmap</code></a>
<ul>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#the-basics"><i class="fa fa-check"></i>The basics</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#combining-layers"><i class="fa fa-check"></i>Combining layers</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tweaking-classification-schemes"><i class="fa fa-check"></i>Tweaking classification schemes</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tweaking-colors"><i class="fa fa-check"></i>Tweaking colors</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#adding-labels"><i class="fa fa-check"></i>Adding labels</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#adding-a-grid-or-graticule"><i class="fa fa-check"></i>Adding a grid or graticule</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#adding-statistical-plots"><i class="fa fa-check"></i>Adding statistical plots</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#mapping-raster-files"><i class="fa fa-check"></i>Mapping raster files</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#changing-coordinate-systems"><i class="fa fa-check"></i>Changing coordinate systems</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#side-by-side-maps"><i class="fa fa-check"></i>Side-by-side maps</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#splitting-data-by-polygons-or-group-of-polygons"><i class="fa fa-check"></i>Splitting data by polygons or group of polygons</a></li>
</ul></li>
<li><a href="mapping-data-in-r.html#ggplot2"><code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#the-basics-1"><i class="fa fa-check"></i>The basics</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tweaking-classification-schemes-1"><i class="fa fa-check"></i>Tweaking classification schemes</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#combining-layers-1"><i class="fa fa-check"></i>Combining layers</a></li>
</ul></li>
<li><a href="mapping-data-in-r.html#plot_sf"><code>plot_sf</code></a>
<ul>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#the-basics-2"><i class="fa fa-check"></i>The basics</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#adding-a-graticule"><i class="fa fa-check"></i>Adding a graticule</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#combining-layers-2"><i class="fa fa-check"></i>Combining layers</a></li>
<li class="chapter" data-level="" data-path="mapping-data-in-r.html"><a href="mapping-data-in-r.html#tweaking-colors-1"><i class="fa fa-check"></i>Tweaking colors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html"><i class="fa fa-check"></i><b>C</b> Anatomy of simple feature objects</a>
<ul>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#creating-point-sf-objects"><i class="fa fa-check"></i>Creating point ‘sf’ objects</a>
<ul>
<li><a href="anatomy-of-simple-feature-objects.html#step-1-create-the-point-geometry-sfg">Step 1: Create the point geometry: <code>sfg</code></a></li>
<li><a href="anatomy-of-simple-feature-objects.html#step-2-create-a-column-of-simple-feature-geometries-sfc">Step 2: Create a column of simple feature geometries: <code>sfc</code></a></li>
<li><a href="anatomy-of-simple-feature-objects.html#step-3-create-the-simple-feature-object-sf">Step 3: Create the simple feature object <code>sf</code></a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#renaming-the-geometry-column"><i class="fa fa-check"></i>Renaming the geometry column</a></li>
<li><a href="anatomy-of-simple-feature-objects.html#adding-attributes-to-an-sf-object">Adding attributes to an <code>sf</code> object</a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#adding-a-geometry-column-to-an-existing-non-spatial-dataframe"><i class="fa fa-check"></i>Adding a geometry column to an existing non-spatial dataframe</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#creating-polyline-sf-objects"><i class="fa fa-check"></i>Creating polyline ‘sf’ objects</a>
<ul>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#creating-branching-polyline-features"><i class="fa fa-check"></i>Creating branching polyline features</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#creating-polygon-sf-objects"><i class="fa fa-check"></i>Creating polygon ‘sf’ objects</a>
<ul>
<li><a href="anatomy-of-simple-feature-objects.html#polygon-simple-feature"><code>POLYGON</code> simple feature</a></li>
<li><a href="anatomy-of-simple-feature-objects.html#multipolygon-simple-feature-multipart-features"><code>MULTIPOLYGON</code> simple feature: multipart features</a></li>
</ul></li>
<li><a href="anatomy-of-simple-feature-objects.html#extracting-geometry-from-an-sf-object">Extracting geometry from an <code>sf</code> object</a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#alternative-syntax"><i class="fa fa-check"></i>Alternative syntax</a></li>
<li class="chapter" data-level="" data-path="anatomy-of-simple-feature-objects.html"><a href="anatomy-of-simple-feature-objects.html#additional-resources"><i class="fa fa-check"></i>Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html"><i class="fa fa-check"></i><b>D</b> Vector operations in R</a>
<ul>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#dissolving-geometries"><i class="fa fa-check"></i>Dissolving geometries</a>
<ul>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#dissolving-by-contiguous-shape"><i class="fa fa-check"></i>Dissolving by contiguous shape</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#dissolving-by-attribute"><i class="fa fa-check"></i>Dissolving by attribute</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#subsetting-by-attribute"><i class="fa fa-check"></i>Subsetting by attribute</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#intersecting-layers"><i class="fa fa-check"></i>Intersecting layers</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#clipping-spatial-objects-using-other-spatial-objects"><i class="fa fa-check"></i>Clipping spatial objects using other spatial objects</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#unioning-layers"><i class="fa fa-check"></i>Unioning layers</a></li>
<li class="chapter" data-level="" data-path="vector-operations-in-r.html"><a href="vector-operations-in-r.html#buffering-geometries"><i class="fa fa-check"></i>Buffering geometries</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html"><i class="fa fa-check"></i><b>E</b> Mapping rates in R</a>
<ul>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#raw-rates"><i class="fa fa-check"></i>Raw Rates</a></li>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#standardized-mortality-ratios-relative-risk."><i class="fa fa-check"></i>Standardized mortality ratios (relative risk).</a></li>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#dykes-and-unwins-chi-square-statistic"><i class="fa fa-check"></i>Dykes and Unwin’s chi-square statistic</a></li>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#unstable-ratios"><i class="fa fa-check"></i>Unstable ratios</a>
<ul>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#global-empirical-bayes-eb-rate-estimate"><i class="fa fa-check"></i>Global Empirical Bayes (EB) rate estimate</a></li>
<li class="chapter" data-level="" data-path="mapping-rates-in-r.html"><a href="mapping-rates-in-r.html#local-empirical-bayes-eb-rate-estimate"><i class="fa fa-check"></i>Local Empirical Bayes (EB) rate estimate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="F" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html"><i class="fa fa-check"></i><b>F</b> Raster operations in R</a>
<ul>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#sample-files-for-this-exercise-1"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#local-operations-and-functions-1"><i class="fa fa-check"></i>Local operations and functions</a>
<ul>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#unary-operations-and-functions-applied-to-single-rasters"><i class="fa fa-check"></i>Unary operations and functions (applied to single rasters)</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#binary-operations-and-functions-where-two-rasters-are-used"><i class="fa fa-check"></i>Binary operations and functions (where two rasters are used)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#focal-operations-and-functions-1"><i class="fa fa-check"></i>Focal operations and functions</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#zonal-operations-and-functions-1"><i class="fa fa-check"></i>Zonal operations and functions</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#global-operations-and-functions-1"><i class="fa fa-check"></i>Global operations and functions</a></li>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#computing-cumulative-distances"><i class="fa fa-check"></i>Computing cumulative distances</a>
<ul>
<li class="chapter" data-level="" data-path="raster-operations-in-r.html"><a href="raster-operations-in-r.html#working-example"><i class="fa fa-check"></i>Working example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="G" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html"><i class="fa fa-check"></i><b>G</b> Coordinate Systems in R</a>
<ul>
<li><a href="coordinate-systems-in-r.html#a-note-about-the-changes-to-the-proj-environment">A note about the changes to the <code>PROJ</code> environment</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#sample-files-for-this-exercise-2"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li><a href="coordinate-systems-in-r.html#loading-the-sf-package">Loading the <code>sf</code> package</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#checking-for-a-coordinate-system"><i class="fa fa-check"></i>Checking for a coordinate system</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#understanding-the-proj4-coordinate-syntax"><i class="fa fa-check"></i>Understanding the Proj4 coordinate syntax</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#assigning-a-coordinate-system"><i class="fa fa-check"></i>Assigning a coordinate system</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#transforming-coordinate-systems"><i class="fa fa-check"></i>Transforming coordinate systems</a>
<ul>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#example-of-a-failed-transformation"><i class="fa fa-check"></i>Example of a failed transformation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#a-note-about-containment"><i class="fa fa-check"></i>A note about containment</a></li>
<li class="chapter" data-level="" data-path="coordinate-systems-in-r.html"><a href="coordinate-systems-in-r.html#creating-tissot-indicatrix-circles"><i class="fa fa-check"></i>Creating Tissot indicatrix circles</a></li>
</ul></li>
<li class="chapter" data-level="H" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html"><i class="fa fa-check"></i><b>H</b> Point pattern analysis in R</a>
<ul>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#sample-files-for-this-exercise-3"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li><a href="point-pattern-analysis-in-r.html#getting-external-data-into-a-spatstat-format">Getting external data into a <code>spatstat</code> format</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#prepping-the-data"><i class="fa fa-check"></i>Prepping the data</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#density-based-analysis-1"><i class="fa fa-check"></i>Density based analysis</a>
<ul>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#quadrat-density-1"><i class="fa fa-check"></i>Quadrat density</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#quadrat-density-on-a-tessellated-surface"><i class="fa fa-check"></i>Quadrat density on a tessellated surface</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#kernel-density-raster"><i class="fa fa-check"></i>Kernel density raster</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#kernel-density-adjusted-for-covariate-1"><i class="fa fa-check"></i>Kernel density adjusted for covariate</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#modeling-intensity-as-a-function-of-a-covariate-1"><i class="fa fa-check"></i>Modeling intensity as a function of a covariate</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#distance-based-analysis-1"><i class="fa fa-check"></i>Distance based analysis</a>
<ul>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#average-nearest-neighbor-analysis"><i class="fa fa-check"></i>Average nearest neighbor analysis</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#k-and-l-functions-1"><i class="fa fa-check"></i>K and L functions</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#pair-correlation-function-g"><i class="fa fa-check"></i>Pair correlation function g</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#hypothesis-tests"><i class="fa fa-check"></i>Hypothesis tests</a>
<ul>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#test-for-clusteringdispersion"><i class="fa fa-check"></i>Test for clustering/dispersion</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#computing-a-pseudo-p-value-from-the-simulation"><i class="fa fa-check"></i>Computing a pseudo p-value from the simulation</a></li>
<li class="chapter" data-level="" data-path="point-pattern-analysis-in-r.html"><a href="point-pattern-analysis-in-r.html#test-for-a-poisson-point-process-model-with-a-covariate-effect"><i class="fa fa-check"></i>Test for a poisson point process model with a covariate effect</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="I" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html"><i class="fa fa-check"></i><b>I</b> Spatial autocorrelation in R</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_1"><i class="fa fa-check"></i>Sample files for this exercise</a></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_2"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_3"><i class="fa fa-check"></i>Define neighboring polygons</a></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_4"><i class="fa fa-check"></i>Computing the Moran’s I statistic: the hard way</a>
<ul>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#computing-a-pseudo-p-value-from-an-mc-simulation"><i class="fa fa-check"></i>Computing a pseudo p-value from an MC simulation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_5"><i class="fa fa-check"></i>Computing the Moran’s I statistic: the easy way</a></li>
<li class="chapter" data-level="" data-path="spatial-autocorrelation-in-r.html"><a href="spatial-autocorrelation-in-r.html#app8_6"><i class="fa fa-check"></i>Moran’s I as a function of a distance band</a></li>
</ul></li>
<li class="chapter" data-level="J" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html"><i class="fa fa-check"></i><b>J</b> Interpolation in R</a>
<ul>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#thiessen-polygons"><i class="fa fa-check"></i>Thiessen polygons</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#idw"><i class="fa fa-check"></i>IDW</a>
<ul>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#fine-tuning-the-interpolation"><i class="fa fa-check"></i>Fine-tuning the interpolation</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#cross-validation"><i class="fa fa-check"></i>Cross-validation</a></li>
</ul></li>
<li><a href="interpolation-in-r.html#st-order-polynomial-fit">1<sup>st</sup> order polynomial fit</a></li>
<li><a href="interpolation-in-r.html#nd-order-polynomial">2<sup>nd</sup> order polynomial</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#kriging"><i class="fa fa-check"></i>Kriging</a>
<ul>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#fit-the-variogram-model"><i class="fa fa-check"></i>Fit the variogram model</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#generate-kriged-surface"><i class="fa fa-check"></i>Generate Kriged surface</a></li>
<li class="chapter" data-level="" data-path="interpolation-in-r.html"><a href="interpolation-in-r.html#generate-the-variance-and-confidence-interval-maps"><i class="fa fa-check"></i>Generate the variance and confidence interval maps</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro to GIS and Spatial Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mapping-data-in-r" class="section level1" number="17">
<h1><span class="header-section-number">B</span> Mapping data in R</h1>
<table class="package_ver_table">
<tbody>
<tr>
<td style="text-align:left;color: black !important;background-color: #ffc178 !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
R
</td>
<td style="text-align:left;color: black !important;background-color: #ffc178 !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
sf
</td>
<td style="text-align:left;color: black !important;background-color: #ffc178 !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
tmap
</td>
<td style="text-align:left;color: black !important;background-color: #ffc178 !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
ggplot2
</td>
<td style="text-align:left;color: black !important;background-color: #ffc178 !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
raster
</td>
</tr>
<tr>
<td style="text-align:left;color: white !important;background-color: #AAAAAA !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
4.1.1
</td>
<td style="text-align:left;color: white !important;background-color: #AAAAAA !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
1.0.2
</td>
<td style="text-align:left;color: white !important;background-color: #AAAAAA !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
3.3.2
</td>
<td style="text-align:left;color: white !important;background-color: #AAAAAA !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
3.3.5
</td>
<td style="text-align:left;color: white !important;background-color: #AAAAAA !important;text-align: center;font-size: 12px !important; 
              margin:5px; 
              border-radius: 8px;
              border: 2px solid white;
              padding-top: 1px;
              padding-bottom: 1px;
              padding-left: 4px;
              padding-right: 4px;">
3.4.13
</td>
</tr>
</tbody>
</table>
<p>There are many mapping environments that can be adopted in R. Three are presented in this tutorial: <code>tmap</code>, <code>ggplot2</code> and <code>plot_sf</code>.</p>
<div id="sample-files-for-this-exercise" class="section level2 unnumbered">
<h2>Sample files for this exercise</h2>
<p>Data used in the following exercises can be loaded into your current R session by running the following chunk of code.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="mapping-data-in-r.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb54-2"><a href="mapping-data-in-r.html#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="mapping-data-in-r.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">&quot;https://github.com/mgimond/Spatial/raw/main/Data/Sample1.RData&quot;</span>))</span></code></pre></div>
<p>The data objects consist of five layers: an elevation raster (<code>elev.r</code>), an interstate polyline layer (<code>inter.sf</code>), a point cities layer (p.sf), a railroad polyline layer (<code>rail.sf</code>) and a Maine counties polygon layer (<code>s.sf</code>). All vector layers are <code>sf</code> objects. All layers are in a UTM/NAD83 projection (Zone 19N) except <code>p.sf</code> which is in a WGS 1984 geographic coordinate system.</p>
</div>
<div id="tmap" class="section level2 unnumbered">
<h2><code>tmap</code></h2>
<p>The <code>tmap</code> package is specifically developed for mapping spatial data. As such, it offers the greatest mapping options. The package recognizes <code>sf</code>, <code>raster</code> and <code>Spatial*</code> objects.</p>
<div id="the-basics" class="section level3 unnumbered">
<h3>The basics</h3>
<p>To map the counties polygon layer using a grey color scheme, type:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="mapping-data-in-r.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap) </span>
<span id="cb55-2"><a href="mapping-data-in-r.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;grey&quot;</span>, <span class="at">border.col=</span><span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-3-1.png" width="336" /></p>
<p>The <code>tm_shape</code> function loads the spatial object (vector or raster) into the mapping session. The <code>tm_polygons</code> function is one of many <code>tmap</code> functions that dictates how the spatial object is to be mapped. The <code>col</code> parameter defines either the polygon fill color or the spatial object’s attribute column to be used to define the polygons’ color scheme. For example, to use the <code>Income</code> attribute value to define the color scheme, type:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="mapping-data-in-r.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;Income&quot;</span>, <span class="at">border.col =</span> <span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-4-1.png" width="336" /></p>
<p>Note the <code>+</code> symbol used to piece together the functions (this is similar to the <code>ggplot2</code> syntax).</p>
<p>You can customize the map by piecing together various map element functions. For example, to move the legend box outside of the main map body add the <code>tm_legend(outside = TRUE)</code> function to the mapping operation.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="mapping-data-in-r.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="st">&quot;Income&quot;</span>,  <span class="at">border.col =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span> </span>
<span id="cb57-2"><a href="mapping-data-in-r.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-5-1.png" width="480" /></p>
<p>You can also choose to omit the legend box (via the <code>legend.show = FALSE</code> parameter) and the data frame border (via the <code>tm_layout(frame = FALSE)</code> function):</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="mapping-data-in-r.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb58-2"><a href="mapping-data-in-r.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Income&quot;</span>,  <span class="at">border.col =</span> <span class="st">&quot;white&quot;</span>, <span class="at">legend.show=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb58-3"><a href="mapping-data-in-r.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-6-1.png" width="336" /></p>
<p>If you want to omit the polygon border lines from the plot, simply add the <code>border.col = NULL</code> parameter to the <code>tm_polygons</code> function.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="mapping-data-in-r.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb59-2"><a href="mapping-data-in-r.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Income&quot;</span>, <span class="at">border.col =</span> <span class="cn">NULL</span>) <span class="sc">+</span> </span>
<span id="cb59-3"><a href="mapping-data-in-r.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-7-1.png" width="480" /></p>
<p>Note that the <code>tm_fill</code> function is nearly identical to the <code>tm_polygons</code> function with the difference being that the <code>tm_fill</code> function does not draw polygon borders.</p>
</div>
<div id="combining-layers" class="section level3 unnumbered">
<h3>Combining layers</h3>
<p>You can easily stack layers by piecing together additional <code>tm_shape</code>functions. In the following example, the railroad layer and the point layer are added to the income map. The railroad layer is mapped using the <code>tm_lines</code> function and the cities point layer is mapped using the <code>tm_dots</code> function. Note that layers are pieced together using the <code>+</code> symbol.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="mapping-data-in-r.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb60-2"><a href="mapping-data-in-r.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Income&quot;</span>, <span class="at">border.col =</span> <span class="cn">NULL</span>) <span class="sc">+</span> </span>
<span id="cb60-3"><a href="mapping-data-in-r.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb60-4"><a href="mapping-data-in-r.html#cb60-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">tm_shape</span>(rail.sf) <span class="sc">+</span> <span class="fu">tm_lines</span>(<span class="at">col=</span><span class="st">&quot;grey70&quot;</span>) <span class="sc">+</span></span>
<span id="cb60-5"><a href="mapping-data-in-r.html#cb60-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">tm_shape</span>(p.sf) <span class="sc">+</span> <span class="fu">tm_dots</span>(<span class="at">size=</span><span class="fl">0.3</span>, <span class="at">col=</span><span class="st">&quot;black&quot;</span>) </span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-8-1.png" width="480" /></p>
<p>Layers are stacked in the order in which they are listed. In the above example, the point layer is the last layer called therefore it is drawn on top of the previously drawn layers.</p>
<p>Note that if a layer’s coordinate system is properly defined, <code>tmap</code> will reproject, on-the-fly, any layer whose coordinate system does not match that of the first layer in the stack. In this example, <code>s.sf</code> defines the map’s coordinate system (UTM/NAD83). <code>p.sf</code> is in a geographic coordinate system and is thus reprojected on-the-fly to properly overlap the other layers in the map.</p>
</div>
<div id="tweaking-classification-schemes" class="section level3 unnumbered">
<h3>Tweaking classification schemes</h3>
<p>You can control the classification type, color scheme, and bin numbers via the <code>tm_polygons</code> function. For example, to apply a quantile scheme with 6 bins and varying shades of green, type:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="mapping-data-in-r.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb61-2"><a href="mapping-data-in-r.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Income&quot;</span>, <span class="at">style =</span> <span class="st">&quot;quantile&quot;</span>, <span class="at">n =</span> <span class="dv">6</span>, <span class="at">palette =</span> <span class="st">&quot;Greens&quot;</span>) <span class="sc">+</span> </span>
<span id="cb61-3"><a href="mapping-data-in-r.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-9-1.png" width="480" /></p>
<p>Other <code>style</code> classification schemes include <code>fixed</code>, <code>equal</code>, <code>jenks</code>, <code>kmeans</code> and <code>sd</code>. If you want to control the breaks manually set <code>style=fixed</code> and specify the classification breaks using the <code>breaks</code> parameter. For example,</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="mapping-data-in-r.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb62-2"><a href="mapping-data-in-r.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Income&quot;</span>, <span class="at">style =</span> <span class="st">&quot;fixed&quot;</span>,<span class="at">palette =</span> <span class="st">&quot;Greens&quot;</span>,</span>
<span id="cb62-3"><a href="mapping-data-in-r.html#cb62-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">23000</span>, <span class="dv">27000</span>, <span class="dv">100000</span> )) <span class="sc">+</span> </span>
<span id="cb62-4"><a href="mapping-data-in-r.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-10-1.png" width="480" /></p>
<p>If you want a bit more control over the legend elements, you can tweak the <code>labels</code> parameter as in,</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="mapping-data-in-r.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb63-2"><a href="mapping-data-in-r.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Income&quot;</span>, <span class="at">style =</span> <span class="st">&quot;fixed&quot;</span>,<span class="at">palette =</span> <span class="st">&quot;Greens&quot;</span>,</span>
<span id="cb63-3"><a href="mapping-data-in-r.html#cb63-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">23000</span>, <span class="dv">27000</span>, <span class="dv">100000</span> ),</span>
<span id="cb63-4"><a href="mapping-data-in-r.html#cb63-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;under $23,000&quot;</span>, <span class="st">&quot;$23,000 to $27,000&quot;</span>, <span class="st">&quot;above $27,000&quot;</span>),</span>
<span id="cb63-5"><a href="mapping-data-in-r.html#cb63-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">text.size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb63-6"><a href="mapping-data-in-r.html#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-11-1.png" width="480" /></p>
</div>
<div id="tweaking-colors" class="section level3 unnumbered">
<h3>Tweaking colors</h3>
<p>There are many color schemes to choose from, but you will probably want to stick to color swatches established by <a href="http://colorbrewer2.org">Cynthia Brewer</a>. These palettes are available in <code>tmap</code> and their names are listed below.</p>
<p>For <strong>sequential</strong> color schemes, you can choose from the following palettes.</p>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-12-1.png" width="384" /></p>
<p>For <strong>divergent</strong> color schemes, you can choose from the following palettes.</p>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-13-1.png" width="384" /></p>
<p>For <strong>categorical</strong> color schemes, you can choose from the following palettes.</p>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-14-1.png" width="384" /></p>
<p>For example, to map the county names using the <code>Pastel1</code> categorical color scheme, type:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="mapping-data-in-r.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb64-2"><a href="mapping-data-in-r.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;NAME&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Pastel1&quot;</span>) <span class="sc">+</span> </span>
<span id="cb64-3"><a href="mapping-data-in-r.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-15-1.png" width="480" /></p>
<p>To map the percentage of the population not having attained a high school degree (column labeled <code>NoSchool</code> in <code>s.sf</code>) using a <code>YlOrBr</code> palette with 8 bins while modifying the legend title to read <em>“Fraction without a HS degree”</em>, type:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="mapping-data-in-r.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb65-2"><a href="mapping-data-in-r.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;NoSchool&quot;</span>, <span class="at">style=</span><span class="st">&quot;quantile&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;YlOrBr&quot;</span>, <span class="at">n=</span><span class="dv">8</span>, </span>
<span id="cb65-3"><a href="mapping-data-in-r.html#cb65-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">title=</span><span class="st">&quot;Fraction without </span><span class="sc">\n</span><span class="st">a HS degree&quot;</span>) <span class="sc">+</span> </span>
<span id="cb65-4"><a href="mapping-data-in-r.html#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-16-1.png" width="480" /></p>
<p>The character <code>\n</code> in the “<code>Fraction without \na HS degree</code>” string is interpreted by R as a <em>new line</em> (carriage return).</p>
<p>If you want to reverse the color scheme simply add the minus symbol <code>-</code> in front of the palette name as in <code>palette = "-YlOrBr"</code></p>
</div>
<div id="adding-labels" class="section level3 unnumbered">
<h3>Adding labels</h3>
<p>You can add text and labels using the <code>tm_text</code> function. In the following example, point labels are added to the right of the points with the text left justified (<code>just = "left"</code>) and with an x offset of 0.5 units for added buffer between the point and the text.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="mapping-data-in-r.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb66-2"><a href="mapping-data-in-r.html#cb66-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="st">&quot;NAME&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Pastel1&quot;</span>, <span class="at">border.col =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span> </span>
<span id="cb66-3"><a href="mapping-data-in-r.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb66-4"><a href="mapping-data-in-r.html#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(p.sf) <span class="sc">+</span>   </span>
<span id="cb66-5"><a href="mapping-data-in-r.html#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_dots</span>(<span class="at">size=</span>  .<span class="dv">3</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-6"><a href="mapping-data-in-r.html#cb66-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tm_text</span>(<span class="st">&quot;Name&quot;</span>, <span class="at">just =</span> <span class="st">&quot;left&quot;</span>, <span class="at">xmod =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-17-1.png" width="480" /></p>
<p>The <code>tm_text</code> function accepts an auto placement option via the parameter <code>auto.placement = TRUE</code>. This uses a simulated annealing algorithm. Note that this automated approach may not generate the same text placement after each run.</p>
</div>
<div id="adding-a-grid-or-graticule" class="section level3 unnumbered">
<h3>Adding a grid or graticule</h3>
<p>You can add a grid or graticule to the map using the <code>tm_grid</code> function. You will need to modify the map’s default viewport setting via the <code>tm_layout</code> function to provide space for the grid labels. In the following example, the grid is generated using the layer’s UTM coordinate system and is divided into roughly four segments along the x-axis and five segments along the y-axis. The function will adjust the grid placement so as to generate “pretty” label values.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="mapping-data-in-r.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb67-2"><a href="mapping-data-in-r.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;NAME&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Pastel1&quot;</span>) <span class="sc">+</span> </span>
<span id="cb67-3"><a href="mapping-data-in-r.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb67-4"><a href="mapping-data-in-r.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">outer.margins =</span> <span class="fu">c</span>(.<span class="dv">1</span>,.<span class="dv">1</span>,.<span class="dv">1</span>,.<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb67-5"><a href="mapping-data-in-r.html#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">labels.inside.frame =</span> <span class="cn">FALSE</span>,</span>
<span id="cb67-6"><a href="mapping-data-in-r.html#cb67-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">n.x =</span> <span class="dv">4</span>, <span class="at">n.y =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-18-1.png" width="480" /></p>
<p>To generate a graticule (lines of latitude and longitude), simply modify the grid’s coordinate system to a geographic one using either an <a href="https://spatialreference.org/ref/epsg/">EPSG</a> defined coordinate system, or a <a href="https://proj4.org/apps/proj.html">PROJ4</a> formatted string. But note that the <code>PROJ</code> string syntax is falling out of favor in current and future R spatial environments so, if possible, adopt an EPSG (or OGC) code. Here, we’ll use <code>EPSG:4326</code> which defines the WGS 1984 geographic coordinate system.</p>
<p>We will also modify the grid placement by explicitly specifying the lat/long grid values.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="mapping-data-in-r.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb68-2"><a href="mapping-data-in-r.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;NAME&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Pastel1&quot;</span>) <span class="sc">+</span> </span>
<span id="cb68-3"><a href="mapping-data-in-r.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb68-4"><a href="mapping-data-in-r.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">outer.margins =</span> <span class="fu">c</span>(.<span class="dv">1</span>,.<span class="dv">1</span>,.<span class="dv">1</span>,.<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb68-5"><a href="mapping-data-in-r.html#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">labels.inside.frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb68-6"><a href="mapping-data-in-r.html#cb68-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">x =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">70.5</span>, <span class="sc">-</span><span class="dv">69</span>, <span class="sc">-</span><span class="fl">67.5</span>),</span>
<span id="cb68-7"><a href="mapping-data-in-r.html#cb68-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">44</span>, <span class="dv">45</span>, <span class="dv">46</span>, <span class="dv">47</span>),</span>
<span id="cb68-8"><a href="mapping-data-in-r.html#cb68-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">projection =</span> <span class="st">&quot;EPSG:4326&quot;</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-19-1.png" width="480" /></p>
<p>Adding the ° symbol to the lat/long values requires a bit more code:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="mapping-data-in-r.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb69-2"><a href="mapping-data-in-r.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;NAME&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;Pastel1&quot;</span>) <span class="sc">+</span> </span>
<span id="cb69-3"><a href="mapping-data-in-r.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb69-4"><a href="mapping-data-in-r.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">outer.margins =</span> <span class="fu">c</span>(.<span class="dv">1</span>,.<span class="dv">1</span>,.<span class="dv">1</span>,.<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb69-5"><a href="mapping-data-in-r.html#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">labels.inside.frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb69-6"><a href="mapping-data-in-r.html#cb69-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">x =</span>  <span class="fu">c</span>(<span class="sc">-</span><span class="fl">70.5</span>, <span class="sc">-</span><span class="dv">69</span>, <span class="sc">-</span><span class="fl">67.5</span>) ,</span>
<span id="cb69-7"><a href="mapping-data-in-r.html#cb69-7" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">44</span>, <span class="dv">45</span>, <span class="dv">46</span>, <span class="dv">47</span>),</span>
<span id="cb69-8"><a href="mapping-data-in-r.html#cb69-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">projection =</span> <span class="st">&quot;+proj=longlat&quot;</span>,</span>
<span id="cb69-9"><a href="mapping-data-in-r.html#cb69-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels.format =</span> <span class="fu">list</span>(<span class="at">fun=</span><span class="cf">function</span>(x) {<span class="fu">paste0</span>(x,<span class="fu">intToUtf8</span>(<span class="dv">176</span>))} ) )</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-20-1.png" width="480" /></p>
<p>Here, we use the unicode <em>decimal</em> representation of the ° symbol (unicode <em>176</em>) and pass it to the <code>intToUtf8</code> function. A list of unicode characters and their decimal representation can be found on this <a href="https://en.wikipedia.org/wiki/List_of_Unicode_characters#Latin-1_Supplement">Wikipedia</a> page.</p>
</div>
<div id="adding-statistical-plots" class="section level3 unnumbered">
<h3>Adding statistical plots</h3>
<p>A histogram of the variables being mapped can be added to the legend element. By default, the histogram will inherit the colors used in the classification scheme.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="mapping-data-in-r.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> </span>
<span id="cb70-2"><a href="mapping-data-in-r.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;NoSchool&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;YlOrBr&quot;</span>, <span class="at">n =</span> <span class="dv">6</span>, </span>
<span id="cb70-3"><a href="mapping-data-in-r.html#cb70-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">legend.hist =</span> <span class="cn">TRUE</span>, <span class="at">title =</span> <span class="st">&quot;% no school&quot;</span>) <span class="sc">+</span> </span>
<span id="cb70-4"><a href="mapping-data-in-r.html#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>, <span class="at">hist.width =</span> <span class="dv">2</span>) </span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-21-1.png" width="480" /></p>
</div>
<div id="mapping-raster-files" class="section level3 unnumbered">
<h3>Mapping raster files</h3>
<p>Raster objects can be mapped by specifying the <code>tm_raster</code> function. For example to plot the elevation raster and assign 64 continuous shades of the built-in terrain color ramp, type:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="mapping-data-in-r.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(elev.r) <span class="sc">+</span> </span>
<span id="cb71-2"><a href="mapping-data-in-r.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cont&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Elevation (m)&quot;</span>,</span>
<span id="cb71-3"><a href="mapping-data-in-r.html#cb71-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="fu">terrain.colors</span>(<span class="dv">64</span>))<span class="sc">+</span></span>
<span id="cb71-4"><a href="mapping-data-in-r.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-22-1.png" width="480" /></p>
<p>Note the use of another <code>style</code> parameter option: <code>cont</code> for <em>continuous</em> color scheme.</p>
<p>You can choose to symbolize the raster using classification breaks instead of continuous colors. For example, to manually set the breaks to 50, 100, 500, 750, 1000, and 15000 meters, type:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="mapping-data-in-r.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(elev.r) <span class="sc">+</span> </span>
<span id="cb72-2"><a href="mapping-data-in-r.html#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;fixed&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Elevation (m)&quot;</span>,</span>
<span id="cb72-3"><a href="mapping-data-in-r.html#cb72-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">100</span>, <span class="dv">500</span>, <span class="dv">750</span>, <span class="dv">1000</span>, <span class="dv">15000</span>),</span>
<span id="cb72-4"><a href="mapping-data-in-r.html#cb72-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="fu">terrain.colors</span>(<span class="dv">5</span>))<span class="sc">+</span></span>
<span id="cb72-5"><a href="mapping-data-in-r.html#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-23-1.png" width="480" /></p>
<p>Other color gradients that R offers include, <code>heat.colors</code>, <code>rainbow</code>, and <code>topo.colors</code>. You can also create your own color ramp via the <code>colorRampPalette</code> function. For example, to generate a 12 bin quantile classification scheme using a color ramp that changes from <code>darkolivegreen4</code> to <code>yellow</code> to <code>brown</code> (these are built-in R colors), and adding a histogram to view the distribution of colors across pixels, type:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="mapping-data-in-r.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(elev.r) <span class="sc">+</span> </span>
<span id="cb73-2"><a href="mapping-data-in-r.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;quantile&quot;</span>, <span class="at">n =</span> <span class="dv">12</span>, <span class="at">title =</span> <span class="st">&quot;Elevation (m)&quot;</span>,</span>
<span id="cb73-3"><a href="mapping-data-in-r.html#cb73-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="fu">colorRampPalette</span>( <span class="fu">c</span>(<span class="st">&quot;darkolivegreen4&quot;</span>,<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;brown&quot;</span>))(<span class="dv">12</span>),</span>
<span id="cb73-4"><a href="mapping-data-in-r.html#cb73-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.hist =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb73-5"><a href="mapping-data-in-r.html#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>, <span class="at">hist.width =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-24-1.png" width="480" /></p>
<p>Note that the Brewer palette names can also be used with rasters.</p>
</div>
<div id="changing-coordinate-systems" class="section level3 unnumbered">
<h3>Changing coordinate systems</h3>
<p><code>tmap</code> can change the output’s coordinate system without needing to reproject the data layers. In the following example, the elevation raster, railroad layer and point city layer are mapped onto a <em>USA Contiguous Albers Equal Area Conic</em> projection. A lat/long grid is added as a reference.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="mapping-data-in-r.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the Albers coordinate system</span></span>
<span id="cb74-2"><a href="mapping-data-in-r.html#cb74-2" aria-hidden="true" tabindex="-1"></a>aea <span class="ot">&lt;-</span>  <span class="st">&quot;+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=37.5 +lon_0=-96 +ellps=GRS80 +datum=NAD83&quot;</span></span>
<span id="cb74-3"><a href="mapping-data-in-r.html#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="mapping-data-in-r.html#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Map the data</span></span>
<span id="cb74-5"><a href="mapping-data-in-r.html#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(elev.r, <span class="at">projection =</span> aea) <span class="sc">+</span> </span>
<span id="cb74-6"><a href="mapping-data-in-r.html#cb74-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;quantile&quot;</span>, <span class="at">n =</span> <span class="dv">12</span>,</span>
<span id="cb74-7"><a href="mapping-data-in-r.html#cb74-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">palette =</span> <span class="fu">colorRampPalette</span>( <span class="fu">c</span>(<span class="st">&quot;darkolivegreen4&quot;</span>,<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;brown&quot;</span>))(<span class="dv">12</span>),</span>
<span id="cb74-8"><a href="mapping-data-in-r.html#cb74-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.show =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb74-9"><a href="mapping-data-in-r.html#cb74-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(rail.sf) <span class="sc">+</span> <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;grey70&quot;</span>)<span class="sc">+</span></span>
<span id="cb74-10"><a href="mapping-data-in-r.html#cb74-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_shape</span>(p.sf) <span class="sc">+</span><span class="fu">tm_dots</span>(<span class="at">size=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb74-11"><a href="mapping-data-in-r.html#cb74-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">outer.margins =</span> <span class="fu">c</span>(.<span class="dv">1</span>,.<span class="dv">1</span>,.<span class="dv">1</span>,.<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb74-12"><a href="mapping-data-in-r.html#cb74-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_grid</span>(<span class="at">labels.inside.frame =</span> <span class="cn">FALSE</span>, </span>
<span id="cb74-13"><a href="mapping-data-in-r.html#cb74-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">x =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">70.5</span>, <span class="sc">-</span><span class="dv">69</span>, <span class="sc">-</span><span class="fl">67.5</span>),</span>
<span id="cb74-14"><a href="mapping-data-in-r.html#cb74-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">44</span>, <span class="dv">45</span>, <span class="dv">46</span>, <span class="dv">47</span>),</span>
<span id="cb74-15"><a href="mapping-data-in-r.html#cb74-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">projection =</span> <span class="st">&quot;+proj=longlat&quot;</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-25-1.png" width="480" /></p>
<p>The first data layer’s <code>projection=</code> parameter will define the map’s coordinate system. Note that this parameter does not need to be specified in the other layers taking part in the output map.</p>
<p>If a projection is not explicitly defined in the first call to <code>tm_shape</code>, then the output map will default to the first layer’s reference system.</p>
</div>
<div id="side-by-side-maps" class="section level3 unnumbered">
<h3>Side-by-side maps</h3>
<p>You can piece maps together side-by-side using the <code>tmap_arrange</code> function. You first need to save each map to a separate object before combining them. For example:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="mapping-data-in-r.html#cb75-1" aria-hidden="true" tabindex="-1"></a>inc.map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;Income&quot;</span>)<span class="sc">+</span></span>
<span id="cb75-2"><a href="mapping-data-in-r.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside=</span><span class="cn">TRUE</span>) </span>
<span id="cb75-3"><a href="mapping-data-in-r.html#cb75-3" aria-hidden="true" tabindex="-1"></a>school.map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NoSchool&quot;</span>)<span class="sc">+</span></span>
<span id="cb75-4"><a href="mapping-data-in-r.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside=</span><span class="cn">TRUE</span>) </span>
<span id="cb75-5"><a href="mapping-data-in-r.html#cb75-5" aria-hidden="true" tabindex="-1"></a>name.map <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;NAME&quot;</span>)<span class="sc">+</span></span>
<span id="cb75-6"><a href="mapping-data-in-r.html#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside=</span><span class="cn">TRUE</span>) </span>
<span id="cb75-7"><a href="mapping-data-in-r.html#cb75-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-8"><a href="mapping-data-in-r.html#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_arrange</span>(inc.map, school.map, name.map)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-26-1.png" width="1248" /></p>
</div>
<div id="splitting-data-by-polygons-or-group-of-polygons" class="section level3 unnumbered">
<h3>Splitting data by polygons or group of polygons</h3>
<p>You can split the output into groups of features based on a column attribute. For example, to split the income map into individual polygons via the <code>NAME</code> attribute, type:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="mapping-data-in-r.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(s.sf) <span class="sc">+</span> <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;Income&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-2"><a href="mapping-data-in-r.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">outside =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb76-3"><a href="mapping-data-in-r.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_facets</span>( <span class="at">by =</span> <span class="st">&quot;NAME&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-27-1.png" width="1248" /></p>
<p>The order of the faceted plot follows the alphanumeric order of the faceting attribute values. If you want to change the faceted order, you will need to change the attribute’s <a href="https://mgimond.github.io/ES218/Week02a.html#Rearranging_level_order">level order</a>.</p>
</div>
</div>
<div id="ggplot2" class="section level2 unnumbered">
<h2><code>ggplot2</code></h2>
<p>If you are already familiar with <code>ggplot2</code>, you will find it easy to transition to spatial data visualization. The key <em>geom</em> used when mapping spatial data is <code>geom_sf()</code>.</p>
<div id="the-basics-1" class="section level3 unnumbered">
<h3>The basics</h3>
<p>If you wish to simply plot the geometric elements of a layer, type:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="mapping-data-in-r.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb77-2"><a href="mapping-data-in-r.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf) <span class="sc">+</span> <span class="fu">geom_sf</span>()</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-28-1.png" width="336" /></p>
<p>As with any ggplot operation, you can also pass the object’s name to the <code>geom_sf()</code> instead of the <code>ggplot</code> function as in:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="mapping-data-in-r.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data =</span> s.sf)</span></code></pre></div>
<p>This will prove practical later in this exercise when multiple layers are plotted on the map.</p>
<p>By default, <code>ggplot</code> will add a graticule to the plot, even if the coordinate system associated with the layer is in a projected coordinate system. You can adopt any one of <code>ggplot2</code>’s gridline removal strategies to eliminate the grid from the plot. Here, we’ll make use of the <code>theme_void()</code> function.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="mapping-data-in-r.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span> <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-30-1.png" width="336" /></p>
<p>If you want to have ggplot adopt the layer’s native coordinate system (UTM NAD 1983 in this example) instead of the default geographic coordinate system, type:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="mapping-data-in-r.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span> <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-31-1.png" width="336" /></p>
<p>Or, you can explicitly assign the data layer’s datum via a call to <code>st_crs</code> as in <code>... + coord_sf(datum = st_crs(s.sf))</code></p>
<p>By setting <code>datum</code> to <code>NULL</code>, you prevent ggplot from figuring out how to convert the layer’s native coordinate system to a geographic one.</p>
<p>You can control grid/graticule intervals using ggplot’s <code>scale_..._continuous</code> functions. For example:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="mapping-data-in-r.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb81-2"><a href="mapping-data-in-r.html#cb81-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">70</span>, <span class="sc">-</span><span class="dv">69</span>, <span class="sc">-</span><span class="dv">68</span>)) <span class="sc">+</span></span>
<span id="cb81-3"><a href="mapping-data-in-r.html#cb81-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">44</span><span class="sc">:</span><span class="dv">47</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-32-1.png" width="336" /></p>
<p>If you wish to apply a grid native to the layer’s coordinate system, type:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="mapping-data-in-r.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb82-2"><a href="mapping-data-in-r.html#cb82-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb82-3"><a href="mapping-data-in-r.html#cb82-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">400000</span>, <span class="dv">500000</span>, <span class="dv">600000</span>)) <span class="sc">+</span></span>
<span id="cb82-4"><a href="mapping-data-in-r.html#cb82-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">4900000</span>, <span class="dv">5100000</span>))</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-33-1.png" width="336" /></p>
<p>To symbolize a layer’s geometries using one of the layer’s attributes, add the <code>aes()</code> function.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="mapping-data-in-r.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf, <span class="fu">aes</span>(<span class="at">fill =</span> Income)) <span class="sc">+</span> <span class="fu">geom_sf</span>() </span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-34-1.png" width="336" /></p>
<p>Note that the data and aesthetics can be defined in the <code>geom_sf</code> function as well:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="mapping-data-in-r.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_sf</span>(<span class="at">data =</span> s.sf, <span class="fu">aes</span>(<span class="at">fill =</span> Income)) </span></code></pre></div>
<p>To change the border color, type:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="mapping-data-in-r.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf, <span class="fu">aes</span>(<span class="at">fill =</span> Income)) <span class="sc">+</span> </span>
<span id="cb85-2"><a href="mapping-data-in-r.html#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">col =</span> <span class="st">&quot;white&quot;</span>) </span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-36-1.png" width="336" /></p>
<p>To remove outlines, simply pass <code>NA</code> to <code>col</code> (e.g. <code>col = NA</code>) in the <code>geom_sf</code> function.</p>
</div>
<div id="tweaking-classification-schemes-1" class="section level3 unnumbered">
<h3>Tweaking classification schemes</h3>
<p>To bin the color scheme by assigning ranges of income values to a unique set of color swatches defined by hex values, use one of the <code>scale_fill_steps*</code> family of functions.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="mapping-data-in-r.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf, <span class="fu">aes</span>(<span class="at">fill =</span> Income)) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb86-2"><a href="mapping-data-in-r.html#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_stepsn</span>(<span class="at">colors =</span> <span class="fu">c</span>(<span class="st">&quot;#D73027&quot;</span>, <span class="st">&quot;#FC8D59&quot;</span>, <span class="st">&quot;#FEE08B&quot;</span>, </span>
<span id="cb86-3"><a href="mapping-data-in-r.html#cb86-3" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;#D9EF8B&quot;</span>, <span class="st">&quot;#91CF60&quot;</span>) ,</span>
<span id="cb86-4"><a href="mapping-data-in-r.html#cb86-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">22000</span>, <span class="dv">25000</span>, <span class="dv">27000</span>, <span class="dv">30000</span>))</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-37-1.png" width="336" /></p>
<p>You can adopt Brewer’s color schemes (see <a href="#app2_2_3">the section</a> on Brewer’s color schemes) by applying one of the <code>scale_..._fermenter()</code> functions and specifying the classification type (sequential, <code>seq</code>; divergent, <code>div</code>; or categorical, <code>qual</code>) and the palette name. For example, to adopt a divergent color scheme using the <code>"PRGn"</code> colors, type:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="mapping-data-in-r.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf, <span class="fu">aes</span>(<span class="at">fill =</span> Income)) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb87-2"><a href="mapping-data-in-r.html#cb87-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_fermenter</span>(<span class="at">type =</span> <span class="st">&quot;div&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;PRGn&quot;</span>, <span class="at">n.breaks =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-38-1.png" width="336" /></p>
<p>The flip the color scheme set <code>direction</code> to <code>1</code>.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="mapping-data-in-r.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf, <span class="fu">aes</span>(<span class="at">fill =</span> Income)) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb88-2"><a href="mapping-data-in-r.html#cb88-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_fill_fermenter</span>(<span class="at">type =</span> <span class="st">&quot;div&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;PRGn&quot;</span>, <span class="at">n.breaks =</span> <span class="dv">4</span>, <span class="at">direction =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-39-1.png" width="336" /></p>
<p>ggplot offers many advanced options. For example, we can modify the bin intervals by generating a non-uniform classification scheme and scale the legend bar so as to reflect the non-uniform intervals using the <code>guide_coloursteps()</code> function and its <code>even.steps = FALSE</code> argument. We’ll also modify the legend bar dimensions and title in this code chunk.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="mapping-data-in-r.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> s.sf, <span class="fu">aes</span>(<span class="at">fill =</span> Income)) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb89-2"><a href="mapping-data-in-r.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_stepsn</span>(<span class="at">colors =</span> <span class="fu">c</span>(<span class="st">&quot;#D73027&quot;</span>, <span class="st">&quot;#FC8D59&quot;</span>, <span class="st">&quot;#FEE08B&quot;</span>, </span>
<span id="cb89-3"><a href="mapping-data-in-r.html#cb89-3" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;#D9EF8B&quot;</span>, <span class="st">&quot;#91CF60&quot;</span>, <span class="st">&quot;#1A9850&quot;</span>) ,</span>
<span id="cb89-4"><a href="mapping-data-in-r.html#cb89-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">22000</span>, <span class="dv">25000</span>, <span class="dv">26000</span>, <span class="dv">27000</span>, <span class="dv">30000</span>),</span>
<span id="cb89-5"><a href="mapping-data-in-r.html#cb89-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">values =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(<span class="fu">c</span>(<span class="dv">22000</span>, <span class="dv">25000</span>, <span class="dv">26000</span>, <span class="dv">27000</span>, <span class="dv">30000</span>), <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)),</span>
<span id="cb89-6"><a href="mapping-data-in-r.html#cb89-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">guide =</span> <span class="fu">guide_coloursteps</span>(<span class="at">even.steps =</span> <span class="cn">FALSE</span>,</span>
<span id="cb89-7"><a href="mapping-data-in-r.html#cb89-7" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">show.limits =</span> <span class="cn">TRUE</span>,</span>
<span id="cb89-8"><a href="mapping-data-in-r.html#cb89-8" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">title =</span> <span class="st">&quot;Per capita Income </span><span class="sc">\n</span><span class="st">(US dollars)&quot;</span>,</span>
<span id="cb89-9"><a href="mapping-data-in-r.html#cb89-9" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">barheight =</span> <span class="fu">unit</span>(<span class="fl">2.2</span>, <span class="st">&quot;in&quot;</span>),</span>
<span id="cb89-10"><a href="mapping-data-in-r.html#cb89-10" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">barwidth =</span> <span class="fu">unit</span>(<span class="fl">0.15</span>, <span class="st">&quot;in&quot;</span>))) </span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-40-1.png" width="336" /></p>
</div>
<div id="combining-layers-1" class="section level3 unnumbered">
<h3>Combining layers</h3>
<p>You can overlap layers in the map by adding calls to <code>geom_sf</code>. In such a scenario, it might be best for readability sake to specify the layer name in the <code>geom_sf</code> function instead of the <code>ggplot</code> function.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="mapping-data-in-r.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb90-2"><a href="mapping-data-in-r.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> s.sf, <span class="fu">aes</span>(<span class="at">fill =</span> Income)) <span class="sc">+</span></span>
<span id="cb90-3"><a href="mapping-data-in-r.html#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> rail.sf, <span class="at">col =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb90-4"><a href="mapping-data-in-r.html#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> p.sf, <span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-41-1.png" width="336" /></p>
<p>Note that ggplot will convert coordinate systems on-the-fly as needed. Here, <code>p.sf</code> is in a coordinate system different from the other layers.</p>
<p>You can also add raster layers to the map. However, the raster layer must be in a dataframe format with <code>x</code>, <code>y</code> and <code>z</code> columns. The <code>elev.r</code> raster is in a <code>RasterLayer</code> format and will need to be converted to a dataframe using the <code>as.data.frame</code> function from the <code>raster</code> package. This function has a special method for raster layers, as such, it adds parameters unique to this method. These include <code>xy = TRUE</code> which instructs the function to create x and y coordinate columns from the data, and <code>na.rm = TRUE</code> which removes blank cells (this will help reduce the size of our dataframe given that <code>elev.r</code> does not fill its extent’s rectangular outline).</p>
<p>Since the layers are drawn in the order listed, we will move the <code>rail.sf</code> vector layer to the bottom of the stack. Note that we also need to load the <code>raster</code> package to take advantage of its <code>as.data.frame</code> method.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="mapping-data-in-r.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster) <span class="co"># Used to coerce raster to dataframe</span></span>
<span id="cb91-2"><a href="mapping-data-in-r.html#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="mapping-data-in-r.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb91-4"><a href="mapping-data-in-r.html#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> <span class="fu">as.data.frame</span>(elev.r, <span class="at">xy=</span><span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb91-5"><a href="mapping-data-in-r.html#cb91-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elev)) <span class="sc">+</span></span>
<span id="cb91-6"><a href="mapping-data-in-r.html#cb91-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(<span class="at">colours =</span> <span class="fu">terrain.colors</span>(<span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb91-7"><a href="mapping-data-in-r.html#cb91-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> rail.sf, <span class="at">col =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb91-8"><a href="mapping-data-in-r.html#cb91-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> p.sf, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb91-9"><a href="mapping-data-in-r.html#cb91-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_blank</span>())  <span class="co"># Removes axes labels</span></span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-42-1.png" width="336" /></p>
</div>
</div>
<div id="plot_sf" class="section level2 unnumbered">
<h2><code>plot_sf</code></h2>
<p>The <code>sf</code> package has its own plot method. This is a convenient way to generate simple plots without needing additional plotting packages.</p>
<div id="the-basics-2" class="section level3 unnumbered">
<h3>The basics</h3>
<p>By default, when passing an <code>sf</code> object to `plot, the function will generate as may plots as there are attribute columns. For example</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="mapping-data-in-r.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(s.sf)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-43-1.png" width="336" /></p>
<p>To limit the plot to just one of the attribute columns, limit the dataset using basic R indexing techniques. For example, to plot the <code>Income</code> column, type</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="mapping-data-in-r.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(s.sf[<span class="st">&quot;Income&quot;</span>])</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-44-1.png" width="336" /></p>
<p>To limit the output to just the layer’s geometry, wrap the object name with the <code>st_geometry</code> function.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="mapping-data-in-r.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(s.sf))</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-45-1.png" width="336" /></p>
<p>You can control the fill and border colors using the <code>col</code> and <code>border</code> parameters respectively.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="mapping-data-in-r.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(s.sf), <span class="at">col =</span><span class="st">&quot;grey&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-46-1.png" width="336" /></p>
</div>
<div id="adding-a-graticule" class="section level3 unnumbered">
<h3>Adding a graticule</h3>
<p>You can add a graticule by setting the graticule parameter to <code>TRUE</code>. To add graticule labels, set <code>axes</code> to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="mapping-data-in-r.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(s.sf), <span class="at">col =</span><span class="st">&quot;grey&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>, <span class="at">graticule =</span> <span class="cn">TRUE</span>, <span class="at">axes=</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-47-1.png" width="316.8" /></p>
</div>
<div id="combining-layers-2" class="section level3 unnumbered">
<h3>Combining layers</h3>
<p>To add layers, generate a new call to <code>plot</code> with the <code>add</code> parameter set to <code>TRUE</code>. For example, to add <code>rail.sf</code> and <code>p.sf</code> to the map, type:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="mapping-data-in-r.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(s.sf), <span class="at">col =</span><span class="st">&quot;grey&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>, <span class="at">graticule =</span> <span class="cn">TRUE</span>, <span class="at">axes=</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-2"><a href="mapping-data-in-r.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(rail.sf,  <span class="at">col =</span> <span class="st">&quot;grey20&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-48-1.png" width="316.8" /></p>
<p>Note that <code>plot_sf</code> requires that the layers be in the same coordinate system. For example, adding <code>p.sf</code> will not show the points on the map given that it’s in a different coordinate system.</p>
<p><code>sf</code> layers can be combined with raster layers. The order in which layers are listed will matter. You will usually want to map the raster layer first, then add the vector layer(s).</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="mapping-data-in-r.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(elev.r, <span class="at">col =</span> <span class="fu">terrain.colors</span>(<span class="dv">30</span>))</span>
<span id="cb98-2"><a href="mapping-data-in-r.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_geometry</span>(rail.sf), <span class="at">col =</span><span class="st">&quot;grey&quot;</span>, <span class="at">border =</span> <span class="st">&quot;white&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-49-1.png" width="316.8" /></p>
</div>
<div id="tweaking-colors-1" class="section level3 unnumbered">
<h3>Tweaking colors</h3>
<p>You can tweak the color schemes as well as the legend display. The latter will require the use of R’s built-in <code>par</code> function whereby the <code>las = 1</code> parameter will render the key labels horizontal, and the <code>omi</code> parameter will prevent the legend labels from being cropped.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="mapping-data-in-r.html#cb99-1" aria-hidden="true" tabindex="-1"></a>OP <span class="ot">&lt;-</span> <span class="fu">par</span>(<span class="at">las =</span> <span class="dv">1</span>, <span class="at">omi=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.6</span>))</span>
<span id="cb99-2"><a href="mapping-data-in-r.html#cb99-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">plot</span>(s.sf[<span class="st">&quot;Income&quot;</span>], <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">20000</span>, <span class="dv">22000</span>, <span class="dv">25000</span>, <span class="dv">26000</span>, <span class="dv">27000</span>, <span class="dv">30000</span>, <span class="dv">33000</span>),</span>
<span id="cb99-3"><a href="mapping-data-in-r.html#cb99-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">pal =</span> <span class="fu">c</span>(<span class="st">&quot;#D73027&quot;</span>, <span class="st">&quot;#FC8D59&quot;</span>, <span class="st">&quot;#FEE08B&quot;</span>, </span>
<span id="cb99-4"><a href="mapping-data-in-r.html#cb99-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot;#D9EF8B&quot;</span>, <span class="st">&quot;#91CF60&quot;</span>, <span class="st">&quot;#1A9850&quot;</span>),</span>
<span id="cb99-5"><a href="mapping-data-in-r.html#cb99-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">key.width =</span> <span class="fl">0.2</span>,</span>
<span id="cb99-6"><a href="mapping-data-in-r.html#cb99-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">at =</span> <span class="fu">c</span>(<span class="dv">20000</span>, <span class="dv">22000</span>, <span class="dv">25000</span>, <span class="dv">26000</span>, <span class="dv">27000</span>, <span class="dv">30000</span>, <span class="dv">33000</span>))</span>
<span id="cb99-7"><a href="mapping-data-in-r.html#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(OP)</span></code></pre></div>
<p><img src="A02-Mapping-data_files/figure-html/unnamed-chunk-50-1.png" width="364.8" /></p>
<p>While <code>plot_sf</code> offers succinct plotting commands and independence from other mapping packages, it is limited in its customization options.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reading-and-writing-spatial-data-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="anatomy-of-simple-feature-objects.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false,
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
